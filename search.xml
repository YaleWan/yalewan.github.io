<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>å°ç™½éƒ½èƒ½çœ‹æ‡‚çš„å‰ç«¯éƒ¨ç½²ï¼ˆdocker+nginx+jenkinsï¼‰</title>
      <link href="/2020/04/02/xiao-bai-du-neng-kan-dong-de-qian-duan-bu-shu-docker-nginx-jenkins/"/>
      <url>/2020/04/02/xiao-bai-du-neng-kan-dong-de-qian-duan-bu-shu-docker-nginx-jenkins/</url>
      
        <content type="html"><![CDATA[<p><img src="https://user-gold-cdn.xitu.io/2020/4/1/1713499db8c62994?w=916&h=364&f=png&s=89255" alt=""></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>éšç€<code>devops</code>çš„å‘å±•ï¼Œå‰ç«¯éƒ¨ç½²å˜å¾—è¶Šæ¥è¶Šç®€å•ï¼Œå¯æ§æ€§ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼Œæœ¬æ–‡åŸºäº<code>docker</code>ğŸ³+<code>nginx</code>+<code>jenkins</code>æ¥å®ç°å‰ç«¯è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ï¼Œå…·ä½“å®ç°æ•ˆæœä¸ºå¼€å‘äººå‘˜åœ¨æœ¬åœ°å¼€å‘ï¼Œå¼€å‘pushæäº¤ä»£ç åˆ°æŒ‡å®šåˆ†æ”¯ï¼ŒğŸ˜Šè‡ªåŠ¨è§¦å‘jenkinsè¿›è¡ŒæŒç»­é›†æˆå’Œè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚éƒ¨ç½²å®Œæˆåä¼šæ”¶åˆ°é‚®ä»¶çš„é€šçŸ¥ï¼Œæ„å»ºæˆåŠŸåä¼šå°†æ‰“åŒ…åçš„æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œé€šè¿‡<code>nginx</code>åå‘ä»£ç†å±•ç°é¡µé¢ã€‚æ„å»ºå¤±è´¥åˆ™æ‰“å°å‡ºé”™è¯¯æ—¥å¿—ã€‚è€Œ<code>docker</code>ğŸ³æ˜¯æˆ‘ä»¬æ•´ä¸ªéƒ¨ç½²æ–¹æ¡ˆä¸­å¾ˆé‡è¦çš„ä¸€å—ï¼Œç”±<code>docker</code>æ„å»ºé•œåƒï¼Œä¿è¯äº†ç¯å¢ƒçš„ç»Ÿä¸€ğŸ‚ğŸºã€‚</p><h2 id="éƒ¨ç½²ç›®æ ‡"><a href="#éƒ¨ç½²ç›®æ ‡" class="headerlink" title="éƒ¨ç½²ç›®æ ‡"></a>éƒ¨ç½²ç›®æ ‡</h2><ul><li>æ­å»ºdockerğŸ³ã€nginxã€jenkinsç¯å¢ƒ</li><li>é…ç½®docker-compose.yaml<h2 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h2><blockquote><p>æœ¬æ–‡é€‰ç”¨centos7äº‘æœåŠ¡å™¨</p></blockquote><h3 id="dockerç¯å¢ƒ"><a href="#dockerç¯å¢ƒ" class="headerlink" title="dockerç¯å¢ƒ"></a>dockerç¯å¢ƒ</h3><blockquote><p>å¦‚æœå¤§å®¶å¯¹<code>docker</code>ã€<code>docker-compose</code>æœ‰ä¸äº†è§£çš„åœ°æ–¹ï¼Œå¯ä»¥å»æ¶è¡¥ä¸€ä¸‹è¿™æ–¹é¢çš„çŸ¥è¯†ï¼Œè¿™è¾¹å°±ä¸è¯¦ç»†èµ˜è¿°äº†ã€‚</p></blockquote></li></ul><p>åœ¨å®‰è£… docker ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹dockerçš„ç‰ˆæœ¬å®šä¹‰ï¼Œè¿™æœ‰åˆ©äºæˆ‘ä»¬åœ¨ä¹‹åçš„å¼€å‘ä¸­é€‰æ‹©å’Œä½¿ç”¨åˆé€‚çš„ Docker ç‰ˆæœ¬ã€‚å¯¹äºdockeræ¥è¯´,å®ƒåˆ†ä¸ºä¸¤ä¸ªç³»åˆ—:</p><ul><li>ç¤¾åŒºç‰ˆ(ce)</li><li>ä¼ä¸šç‰ˆ(ee)<br/></li></ul><p>ç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆçš„åŒºåˆ«æ— éå°±æ˜¯ä¼ä¸šç‰ˆæ”¶è´¹ï¼Œæä¾›é¢å¤–çš„æœåŠ¡ã€‚</p><pre class=" language-cmd"><code class="language-cmd"> sudo yum install yum-utils device-mapper-persistent-data lvm2 sudo yum-config-manager --add-repo \   https://download.docker.com/linux/centos/docker-ce.repo sudo yum install docker-ce</code></pre><p>ä¸å‡ºæ„å¤–çš„è¯ è¾“å…¥<code>docker -v</code>å‡ºç°å›¾ä¸‹é¡µé¢å°±ä»£è¡¨æˆåŠŸäº†</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/17123dbbacbd3c68?w=636&h=124&f=png&s=168332" alt=""></p><pre class=" language-cmd"><code class="language-cmd"> sudo systemctl enable docker // è®¾ç½®å¼€æœºè‡ªå¯  sudo systemctl start docker //  å¯åŠ¨docker</code></pre><h3 id="å®‰è£…docker-compose"><a href="#å®‰è£…docker-compose" class="headerlink" title="å®‰è£…docker-compose"></a>å®‰è£…docker-compose</h3><p>ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºï¼Œå¾€å¾€éƒ½ä¸æ˜¯ä¸€ä¸ªå®¹å™¨ç»„æˆçš„ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨ç»„æˆä¸€ä¸ªå®¹å™¨ç¾¤ã€‚ä¸€ä¸ªå®¹å™¨ç¾¤çš„æ­å»ºéœ€è¦æ‰§è¡Œå¤ªå¤šå‘½ä»¤ï¼Œæ›´é‡è¦çš„æ˜¯éœ€è¦è€ƒè™‘å¤ªå¤šåº”ç”¨å’Œå®¹å™¨é—´çš„ä¾èµ–å…³ç³»å¤„ç†ï¼Œæ˜¯ä¸€æ³¢ä»¤äººå¤´å¤§çš„æ“ä½œã€‚docker-composeæ­£æ˜¯è§£å†³å¤šä¸ªå®¹å™¨ä¹‹é—´ç®¡ç†çš„é—®é¢˜ã€‚</p><pre class=" language-cmd"><code class="language-cmd">sudo curl -L "https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</code></pre><p>è¾“å…¥å‘½ä»¤å®‰è£…<code>docker-compose</code>ï¼Œå®‰è£…å®Œæˆåæå‡æƒé™                                                                                                                          </p><pre class=" language-cmd"><code class="language-cmd">udo chmod +x /usr/local/bin/docker-compose</code></pre><p>æ‰§è¡Œå®Œä¸Šé¢å‘½ä»¤åï¼Œä¸å‡ºæ„å¤–è¾“å…¥<code>docker-componse -v</code>æ˜¾ç¤ºå¦‚ä¸‹é¡µé¢</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/171252b5c4e9fb86?w=762&h=102&f=png&s=157410" alt=""></p><h3 id="å®‰è£…jenkinså’Œnginxç¯å¢ƒ"><a href="#å®‰è£…jenkinså’Œnginxç¯å¢ƒ" class="headerlink" title="å®‰è£…jenkinså’Œnginxç¯å¢ƒ"></a>å®‰è£…jenkinså’Œnginxç¯å¢ƒ</h3><p>jenkinså’Œnginxç¯å¢ƒä»è¿œç«¯dockeré•œåƒåº“æ‹‰å–</p><pre class=" language-cmd"><code class="language-cmd">docker pull jenkins/jenkins:ltsdocker pull nginx </code></pre><p>åœ¨è¿™é‡Œæ¨èå®‰è£…<code>jenkins/jenkins</code>è¿™ä¸ªé•œåƒï¼Œ<code>jenkins</code>é•œåƒæ˜¯dockerå®˜æ–¹ç»´æŠ¤çš„é•œåƒï¼Œå·²ç»å¾ˆä¹…æ²¡æœ‰ç»´æŠ¤äº†ï¼Œ<code>jenkins/jenkins</code>æ˜¯jenkinså®˜æ–¹ç»´æŠ¤çš„åº“ã€‚æ›´æ–°é¢‘ç‡éå¸¸çš„åˆ°ä½ã€‚åé¢è·Ÿltsè¡¨ç¤ºé•¿æœŸæ”¯æŒçš„æ„æ€ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/29/17123fe901a7ea69?w=1322&h=168&f=png&s=456917" alt=""><br>å®‰è£…å®Œæˆåæ‰§è¡Œ<code>docker images</code>å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°å½“å‰dockerä¸‹å­˜åœ¨çš„é•œåƒã€‚</p><h3 id="ç¼–å†™docker-composeç›®å½•"><a href="#ç¼–å†™docker-composeç›®å½•" class="headerlink" title="ç¼–å†™docker-composeç›®å½•"></a>ç¼–å†™docker-composeç›®å½•</h3><p>è¿™è¾¹çš„ç›®å½•ç»“æ„ä½ å¯ä»¥ç†è§£ä¸ºæ­å»ºç¯å¢ƒæ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’ŒæŒ‚è½½å·ç­‰ï¼Œä¸æ­å»ºä¸€ä¸ªè½¯ä»¶å¼€å‘é¡¹ç›®ç±»ä¼¼ï¼Œæå€¡å°† Docker Composeé¡¹ç›®çš„ç»„æˆå†…å®¹èšé›†åˆ°ä¸€ä¸ªæ–‡ä»¶ç›®å½•ä¸­ï¼Œè¿™æ ·æ›´åˆ©äºæˆ‘ä»¬è¿›è¡Œç®¡ç†å’Œè¿ç§»ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ğŸ‘‰</p><pre class=" language-cmd"><code class="language-cmd">+ compose  - docker-compose.yml  // docker-composeæ‰§è¡Œæ–‡ä»¶+ nginx   + conf.d    - nginx.conf        // nginxé…ç½®+ jenkins  - jenkins_home       // jenkinsæŒ‚è½½å·+ webserver              -static              //å­˜æ”¾å‰ç«¯æ‰“åŒ…åçš„distæ–‡ä»¶</code></pre><p>ä¸ºäº†ç®€å•ï¼Œæˆ‘è¿™è¾¹çš„ç›®å½•ç»“æ„ç›´æ¥æ”¾åœ¨homeä¸‹é¢ï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ–°å»ºä¸€ä¸ªæ–°çš„ç›®å½•ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/30/1712934d36082532?w=1130&h=132&f=png&s=235378" alt=""></p><h3 id="ç¼–å†™docker-compose-yml"><a href="#ç¼–å†™docker-compose-yml" class="headerlink" title="ç¼–å†™docker-compose.yml"></a>ç¼–å†™docker-compose.yml</h3><pre class=" language-cmd"><code class="language-cmd">version: '3'services:                                      # é›†åˆ  docker_jenkins:    user: root                                 # ä¸ºäº†é¿å…ä¸€äº›æƒé™é—®é¢˜ åœ¨è¿™æˆ‘ä½¿ç”¨äº†root    restart: always                            # é‡å¯æ–¹å¼    image: jenkins/jenkins:lts                 # æŒ‡å®šæœåŠ¡æ‰€ä½¿ç”¨çš„é•œåƒ åœ¨è¿™é‡Œæˆ‘é€‰æ‹©äº† LTS (é•¿æœŸæ”¯æŒ)    container_name: jenkins                    # å®¹å™¨åç§°    ports:                                     # å¯¹å¤–æš´éœ²çš„ç«¯å£å®šä¹‰      - 8080:8080      - 50000:50000    volumes:                                   # å·æŒ‚è½½è·¯å¾„      - /home/jenkins/jenkins_home/:/var/jenkins_home  # è¿™æ˜¯æˆ‘ä»¬ä¸€å¼€å§‹åˆ›å»ºçš„ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…çš„jenkins_homeç›®å½•      - /var/run/docker.sock:/var/run/docker.sock      - /usr/bin/docker:/usr/bin/docker                # è¿™æ˜¯ä¸ºäº†æˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨å†…ä½¿ç”¨dockerå‘½ä»¤      - /usr/local/bin/docker-compose:/usr/local/bin/docker-compose  docker_nginx:    restart: always    image: nginx    container_name: nginx    ports:      - 8090:80      - 80:80      - 433:433    volumes:      - /home/nginx/conf.d/:/etc/nginx/conf.d      - /home/webserver/static/jenkins/dist/:/usr/share/nginx/html</code></pre><h3 id="ç¼–å†™nginx-conf"><a href="#ç¼–å†™nginx-conf" class="headerlink" title="ç¼–å†™nginx.conf"></a>ç¼–å†™nginx.conf</h3><pre class=" language-cmd"><code class="language-cmd">server{  listen  80;  root /usr/share/nginx/html;  index index.html index.htm;}</code></pre><h3 id="å¯åŠ¨docker-compose"><a href="#å¯åŠ¨docker-compose" class="headerlink" title="å¯åŠ¨docker-compose"></a>å¯åŠ¨docker-compose</h3><p>å›åˆ°composeç›®å½•ä¸‹</p><pre class=" language-cmd"><code class="language-cmd">docker-compose up -d</code></pre><p>è¾“å…¥<code>docker ps</code>æŸ¥çœ‹å®¹å™¨çš„æƒ…å†µ<br><img src="https://user-gold-cdn.xitu.io/2020/3/31/1712e93b20f7ca05?w=2270&h=190&f=png&s=849125" alt=""><br>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒupçŠ¶æ€è¡¨ç¤ºå·²å¯ç”¨ï¼Œä¸å‡ºæ„å¤–æµè§ˆå™¨ipåœ°å€åŠ ä¸Šç«¯å£å·8080</p><p><img src="https://user-gold-cdn.xitu.io/2020/3/31/1712e987047fcfeb?w=2054&h=1142&f=png&s=202967" alt=""><br>è¿™è¾¹æ³¨æ„å“ˆï¼Œä½ çš„å¯†ç ä¸åœ¨<code>/var/jenkins/jenkins_home/</code>ä¸‹ï¼Œåœ¨å½“åˆé…ç½®<code>docker-compose.ym</code>lä¸­çš„<code>volumes</code>ä¸­<code>/home/jenkins/jenkins_home/</code></p><p><img src="https://user-gold-cdn.xitu.io/2020/3/31/1712ea20d24a7ec2?w=1240&h=72&f=png&s=168550" alt=""><br>æ‹¿åˆ°å¯†ç è¿›å…¥åï¼Œå®‰è£…<code>æ¨èçš„æ’ä»¶</code></p><h2 id="å®‰è£…jenkinsæ’ä»¶"><a href="#å®‰è£…jenkinsæ’ä»¶" class="headerlink" title="å®‰è£…jenkinsæ’ä»¶"></a>å®‰è£…jenkinsæ’ä»¶</h2><blockquote><p>åœ¨æ­¤ä¹‹å‰ï¼Œå…ˆå‡†å¤‡ä¸€ä¸ªvue-cliç”Ÿæˆçš„vueé¡¹ç›®ï¼Œå°†é¡¹ç›®æ”¾åˆ°gitlabä¸­ã€‚</p></blockquote><ul><li>jenkinså®‰è£…å¿…è¦çš„æ’ä»¶<code>gitlab</code>ã€<code>Publish Over SSH</code>ã€<code>nodejs</code></li></ul><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/17133cb9d05e328c?w=1906&h=1418&f=png&s=375581" alt="">ç‚¹å‡»ç›´æ¥å®‰è£…è¿›è¡Œå®‰è£…æ’ä»¶ã€‚å®‰è£…å®Œæˆåé…ç½®nodejsç¯å¢ƒå’Œsshå‚æ•°<br>åœ¨é¦–é¡µé€‰æ‹©<code>global tool Configuration</code>&gt;<code>NodeJS</code>é€‰æ‹©è‡ªåŠ¨å®‰è£…å’Œå¯¹åº”çš„nodejsç‰ˆæœ¬å·ï¼Œé€‰æ‹©æˆåŠŸåç‚¹å‡»ä¿å­˜<br><img src="https://user-gold-cdn.xitu.io/2020/4/1/171346034d047b6a?w=2856&h=1592&f=png&s=253440" alt=""><br>é…ç½®sshä¿¡æ¯ï¼Œ<code>Manage Jenkins</code>&gt;<code>configure System</code>å¡«å†™æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯<br><img src="https://user-gold-cdn.xitu.io/2020/4/1/171346eea555cfce?w=2852&h=1606&f=png&s=258981" alt=""></p><h2 id="jenkinsä¸gitlabé›†æˆ"><a href="#jenkinsä¸gitlabé›†æˆ" class="headerlink" title="jenkinsä¸gitlabé›†æˆ"></a>jenkinsä¸gitlabé›†æˆ</h2><h3 id="ç”Ÿæˆå¯†é’¥"><a href="#ç”Ÿæˆå¯†é’¥" class="headerlink" title="ç”Ÿæˆå¯†é’¥"></a>ç”Ÿæˆå¯†é’¥</h3><ul><li>åœ¨æœåŠ¡å™¨ä¸­ç”Ÿæˆsshå¯†é’¥ï¼ˆå¦‚æœå·²ç»å­˜åœ¨ä¸éœ€è¦ç”Ÿæˆï¼‰</li></ul><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/17133dd42e2293bc?w=946&h=100&f=png&s=208289" alt=""><br><strong>ç”Ÿæˆå‘½ä»¤</strong></p><pre class=" language-cmd"><code class="language-cmd">ssh-keygen -t rsa</code></pre><p>å°†ç”Ÿæˆçš„ç§é’¥ <code>id_rsa</code>æ·»åŠ åˆ°jenkinså‡­æ®ä¸­<br><img src="https://user-gold-cdn.xitu.io/2020/4/1/171344748088714b?w=2824&h=1236&f=png&s=265074" alt=""></p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/17134485b6b62469?w=2800&h=1230&f=png&s=160853" alt=""><br>ç™»é™†gitlabï¼Œåœ¨<code>gitlab</code>ä¸­é…ç½®<code>id_rsa.pub</code>å…¬é’¥</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171344d4f5cef739?w=2866&h=1090&f=png&s=260895" alt=""></p><h3 id="æ–°å»ºé¡¹ç›®"><a href="#æ–°å»ºé¡¹ç›®" class="headerlink" title="æ–°å»ºé¡¹ç›®"></a>æ–°å»ºé¡¹ç›®</h3><p>å‡†å¤‡å®Œæ¯•åï¼Œå¼€å§‹æ–°å»ºä¸€ä¸ªä»»åŠ¡ï¼Œé€‰æ‹©<code>æ–°å»ºitem</code>&gt;<code>freestyle project</code>æ„å»ºä¸€ä¸ªè‡ªç”±é£æ ¼çš„é¡¹ç›®ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171344ecf55d55db?w=2762&h=1458&f=png&s=371573" alt=""></p><h3 id="æºç ç®¡ç†"><a href="#æºç ç®¡ç†" class="headerlink" title="æºç ç®¡ç†"></a>æºç ç®¡ç†</h3><p>æ–°å»ºå®Œæˆåï¼Œåœ¨<code>æºç ç®¡ç†</code>ä¸­é…ç½®gitä¿¡æ¯ï¼Œ<code>credentials</code>é€‰æ‹©æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„å‡­è¯</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/17134526e544b891?w=2762&h=1564&f=png&s=289002" alt=""></p><h3 id="æ„å»ºè§¦å‘å™¨"><a href="#æ„å»ºè§¦å‘å™¨" class="headerlink" title="æ„å»ºè§¦å‘å™¨"></a>æ„å»ºè§¦å‘å™¨</h3><p>åœ¨<code>æ„å»ºè§¦å‘å™¨ä¸­</code>é€‰æ‹©æˆ‘ä»¬è§¦å‘æ„å»ºçš„æ—¶æœºï¼Œä½ å¯ä»¥é€‰æ‹©é˜Ÿå‹çš„é’©å­ï¼Œæ¯”å¦‚<code>push</code>ä»£ç çš„æ—¶å€™ï¼Œ<code>Merge Request</code>çš„æ—¶å€™ç­‰ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171345561d76ede5?w=2468&h=1324&f=png&s=261399" alt=""><br>ç‚¹å‡»<code>é«˜çº§é€‰é¡¹</code>æ‰¾åˆ°<code>secret token</code>&gt;<code>Generate</code>ç”Ÿæˆä¸€ä¸ªtokenå€¼</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171345963f8d49c0?w=2114&h=1274&f=png&s=241899" alt=""><br>ä½ åœ¨è¿™è¾¹é…ç½®æˆåŠŸåï¼Œè¿˜éœ€è¦åˆ°<code>gitlab</code>ä¸­å¢åŠ å¯¹åº”çš„é’©å­ã€‚è®°ä¸‹ä¸Šå›¾çš„<code>webhookURL</code>ï¼ˆçº¢çº¿æ¡†å‡ºï¼‰å’Œ<code>secret token</code>å€¼ï¼Œåˆ°gitlabä¸­è¿›è¡Œé…ç½®ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/171345c261bb06ea?w=2868&h=1436&f=png&s=330371" alt=""></p><h3 id="æ„å»ºç¯å¢ƒ"><a href="#æ„å»ºç¯å¢ƒ" class="headerlink" title="æ„å»ºç¯å¢ƒ"></a>æ„å»ºç¯å¢ƒ</h3><p>æ„å»ºç¯å¢ƒé€‰æ‹©nodeç¯å¢ƒ<br><img src="https://user-gold-cdn.xitu.io/2020/4/1/17134893615d79e3?w=1888&h=936&f=png&s=154892" alt=""></p><h3 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h3><p>é…ç½®nodeæ‰“åŒ…å‘½ä»¤ï¼Œæ‰“åŒ…å®Œæˆåå°†å‹ç¼©åçš„distæ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œ<code>remote directory</code>æ˜¯ç§»é™¤<code>static</code>ä¸‹çš„æ–‡ä»¶ï¼Œè¿™è¾¹çš„webserverç›®å½•å°±æ˜¯ä¸€å¼€å§‹ç¼–å†™çš„ç›®å½•é‡Œ<br><img src="https://user-gold-cdn.xitu.io/2020/4/1/17134827ac977f55?w=2880&h=1560&f=png&s=320054" alt=""><br>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„é…ç½®ä¹Ÿç®—æ˜¯å‘Šä¸€æ®µè½äº†ï¼Œç‚¹å‡»ä¿å­˜ã€‚ä¿®æ”¹ä»£ç ï¼Œ<code>git push</code> ï¼Œä½ ä¼šå‘ç°é¡¹ç›®å·²ç»è‡ªåŠ¨å¼€å§‹æ„å»ºäº†ğŸ˜Š</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/1713487d8a8b008e?w=2548&h=1146&f=png&s=205522" alt=""></p><h2 id="â¤ï¸æ„Ÿè°¢å¤§å®¶"><a href="#â¤ï¸æ„Ÿè°¢å¤§å®¶" class="headerlink" title="â¤ï¸æ„Ÿè°¢å¤§å®¶"></a>â¤ï¸æ„Ÿè°¢å¤§å®¶</h2><p>1.å¦‚æœæ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·åŠ¨åŠ¨ä½ çš„å°æ‰‹æŒ‡ç‚¹ä¸ªèµğŸ‘å§ï¼Œä½ çš„èµæ˜¯æˆ‘åˆ›ä½œçš„åŠ¨åŠ›ã€‚</p><p>2.å…³æ³¨å…¬ä¼—å·ã€Œå‰ç«¯ç²¾è‹±ã€ï¼ä¸å®šæœŸæ¨é€é«˜è´¨é‡æ–‡ç« å“¦ã€‚</p><p><img src="https://user-gold-cdn.xitu.io/2020/4/1/1713494fd88fbb7d?w=738&h=720&f=png&s=289936" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlab-ci</title>
      <link href="/2019/12/27/gitlab-ci/"/>
      <url>/2019/12/27/gitlab-ci/</url>
      
        <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>æŒç»­é›†æˆ(Continuous integrationï¼Œç®€ç§°CI)æ˜¯ä¸€ç§è½¯ä»¶å¼€å‘å®è·µï¼Œå³å›¢é˜Ÿå¼€å‘æˆå‘˜ç»å¸¸é›†æˆä»–ä»¬çš„å·¥ä½œï¼Œé€šå¸¸æ¯ä¸ªæˆå‘˜æ¯å¤©è‡³å°‘é›†æˆä¸€æ¬¡ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯å¤©å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡é›†æˆã€‚ æ¯æ¬¡é›†æˆéƒ½é€šè¿‡è‡ªåŠ¨åŒ–çš„æ„å»ºï¼ˆåŒ…æ‹¬ç¼–è¯‘ï¼Œå‘å¸ƒï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰æ¥éªŒè¯ï¼Œä»è€Œå°½æ—©åœ°å‘ç°é›†æˆé”™è¯¯ã€‚</p><p>æŒç»­é›†æˆå¼ºè°ƒå¼€å‘äººå‘˜æäº¤äº†æ–°ä»£ç ä¹‹åï¼Œç«‹åˆ»è¿›è¡Œæ„å»ºã€ï¼ˆå•å…ƒï¼‰æµ‹è¯•ã€‚æ ¹æ®æµ‹è¯•ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šæ–°ä»£ç å’ŒåŸæœ‰ä»£ç èƒ½å¦æ­£ç¡®åœ°é›†æˆåœ¨ä¸€èµ·ã€‚æŒç»­é›†æˆçš„ç›®çš„ï¼Œå¯ä»¥æ›´é«˜æ•ˆç‡çš„å¿«é€Ÿè¿­ä»£è½¯ä»¶äº§å“ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯é«˜è´¨é‡ã€‚å®ƒå¯ä»¥ä¿éšœï¼Œæˆ‘ä»¬æŠŠä»£ç åˆå¹¶åˆ°ä¸»å¹²ä¹‹å‰ï¼Œèƒ½å¤Ÿå……åˆ†çš„è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå•å…ƒæµ‹è¯•ï¼Œåªè¦æœ‰ä¸€ä¸ªå•å…ƒæµ‹è¯•æœªé€šè¿‡ï¼Œåˆ™æ— æ³•é›†æˆåˆ°ä¸»å¹²ã€‚ </p><p>ä½†æ˜¯è¿™æ ·ä¼šå¯¼è‡´ï¼Œå¼€å‘äººå‘˜è¦å¤šæ¬¡è¿›è¡Œé¡¹ç›®æ„å»ºï¼Œæµªè´¹äº†å¾ˆå¤šå¼€å‘æ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦å°†æ„å»ºç­‰è¿‡ç¨‹äº¤ç”±è‡ªåŠ¨åŒ–çš„æ–¹å¼å»å¤„ç†ï¼Œäºæ˜¯å°±æœ‰äº†æŒç»­é›†æˆç³»ç»Ÿã€‚</p><p>Gitlab CIå°±æ˜¯è¿™æ ·ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥åœ¨ç”¨æˆ·Pushã€åˆ›å»ºtagï¼Œæˆ–è€…æ‰‹åŠ¨è§¦å‘ç­‰æ–¹å¼å»æ‰§è¡ŒæŒ‡å®šçš„è„šæœ¬ï¼Œä»è€Œè¿›è¡Œä»£ç çš„æ„å»ºã€å‘å¸ƒç­‰æ“ä½œï¼Œå’ŒGitlabç›¸ç»“åˆï¼Œå¯ä»¥æ— ç¼çš„å®Œæˆä»£ç ç®¡ç†å’Œé›†æˆã€‚</p><h1 id="å®‰è£…ä¸é…ç½®"><a href="#å®‰è£…ä¸é…ç½®" class="headerlink" title="å®‰è£…ä¸é…ç½®"></a>å®‰è£…ä¸é…ç½®</h1><p>è®©ä¸€ä¸ªgitlabé¡¹ç›®å…·å¤‡CIèƒ½åŠ›ï¼Œåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯CIçš„é…ç½®æ–‡ä»¶.gitlab-ci.ymlï¼Œä¸€ä¸ªæ˜¯gitlab-runnerã€‚</p><p>.gitlab-ci.ymlæ˜¯æè¿°å½“å‰é¡¹ç›®æ˜¯ä»¥æ€æ ·çš„æ–¹å¼è¿›è¡Œæ„å»ºå’Œéƒ¨ç½²ï¼Œéœ€è¦å°†å®ƒæ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ã€‚åœ¨ä»»ä½•çš„pushæ“ä½œï¼ŒGitLabéƒ½ä¼šå¯»æ‰¾.gitlab-ci.ymlæ–‡ä»¶ï¼Œå¹¶å¯¹æ­¤æ¬¡commitå¼€å§‹jobsï¼Œjobsçš„å†…å®¹æ¥æºäº.gitlab-ci.ymlæ–‡ä»¶ã€‚</p><p>gitlab runner æ˜¯ç”¨æ¥æ‰§è¡Œè„šæœ¬æ“ä½œçš„ï¼Œå®ƒå’Œgitlabæ˜¯åˆ†å¼€çš„ï¼Œå¯ä»¥å•ç‹¬éƒ¨ç½²ã€‚</p><h2 id="gitlab-ci-yml"><a href="#gitlab-ci-yml" class="headerlink" title=".gitlab-ci.yml"></a>.gitlab-ci.yml</h2><table><thead><tr><th>åç§°</th><th>ä»‹ç»</th></tr></thead><tbody><tr><td>Pipeline</td><td>ç›¸å½“äºä¸€æ¬¡æ„å»ºä»»åŠ¡ï¼Œé‡Œé¢å¯ä»¥åŒ…å«å¤šä¸ªStages(æ„å»ºé˜¶æ®µ)ï¼Œå¦‚å®‰è£…ä¾èµ–ã€è¿è¡Œæµ‹è¯•ã€ç¼–è¯‘ã€éƒ¨ç½²æµ‹è¯•æœåŠ¡å™¨ã€éƒ¨ç½²ç”Ÿäº§æœåŠ¡å™¨ç­‰æµç¨‹ã€‚</td></tr><tr><td>Stages</td><td>æ„å»ºé˜¶æ®µï¼Œé‡Œé¢å¯ä»¥åŒ…å«å¤šä¸ªJobsï¼ˆæ„å»ºå·¥ä½œï¼‰ã€‚<br><ul><li>æ‰€æœ‰ Stages ä¼šæŒ‰ç…§é¡ºåºè¿è¡Œï¼Œå³å½“ä¸€ä¸ª Stage å®Œæˆåï¼Œä¸‹ä¸€ä¸ª Stage æ‰ä¼šå¼€å§‹ï¼›</li><li>åªæœ‰å½“æ‰€æœ‰ Stages å®Œæˆåï¼Œè¯¥æ„å»ºä»»åŠ¡ (Pipeline) æ‰ä¼šæˆåŠŸï¼›</li><li>å¦‚æœä»»ä½•ä¸€ä¸ª Stage å¤±è´¥ï¼Œé‚£ä¹ˆåé¢çš„ Stages ä¸ä¼šæ‰§è¡Œï¼Œè¯¥æ„å»ºä»»åŠ¡ (Pipeline) å¤±è´¥ã€‚</li></ul></td></tr><tr><td>Jobs</td><td>æ„å»ºå·¥ä½œï¼Œæ¯ä¸ªJobä¸­ä¼šæ‰§è¡Œå¾ˆå¤šè„šæœ¬scriptã€‚<br> <ul><li>ç›¸åŒ Stage ä¸­çš„ Jobs ä¼šå¹¶è¡Œæ‰§è¡Œï¼›</li><li>ç›¸åŒ Stage ä¸­çš„ Jobs éƒ½æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œè¯¥ Stage æ‰ä¼šæˆåŠŸï¼›</li><li>å¦‚æœä»»ä½•ä¸€ä¸ª Job å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥ Stage å¤±è´¥ï¼Œå³è¯¥æ„å»ºä»»åŠ¡ (Pipeline) å¤±è´¥</li></ul></td></tr></tbody></table><p><img src="https://yhpics.oss-cn-beijing.aliyuncs.com/img/blog/9183289-3ef19546e251d4ea.jpg" alt=""></p><p><img src="https://yhpics.oss-cn-beijing.aliyuncs.com/img/blog/9183289-96c931ed61edb9d2.jpg" alt=""></p><p><img src="https://yhpics.oss-cn-beijing.aliyuncs.com/img/blog/9183289-f32431f501080d88.jpg" alt=""></p><p>å‚è€ƒä¸‹é¢çš„é…ç½®æ–‡ä»¶ï¼š</p><pre class=" language-yml"><code class="language-yml">cache:  key: ${CI_BUILD_REF_NAME}  paths:    - node_modules/# æ„å»ºé˜¶æ®µ    stages:  - install_deps  - build  - deploybefore_script:  - export PATH=$PATH:/home/software/node-v8.9.0-linux-x64/bin# å®‰è£…ä¾èµ–install_deps:  stage: install_deps  when: manual  allow_failure: false  only:    - master  script:    - npm install# éƒ¨ç½²ç”Ÿäº§æœåŠ¡å™¨build:  stage: build  only:    - master  script:    - gitbook build # éƒ¨ç½²ç”Ÿäº§æœåŠ¡å™¨deploy:  stage: deploy  only:    - master  script:    - node sftp.js</code></pre><h3 id="cache"><a href="#cache" class="headerlink" title="cache"></a>cache</h3><p>æ¯ä¸ªJobå¼€å§‹çš„æ—¶å€™ï¼ŒRunner éƒ½ä¼šåˆ æ‰.gitignore é‡Œé¢çš„æ–‡ä»¶ã€‚cacheç”¨äºæŒ‡å®šä¸€äº›éœ€è¦åœ¨ä»»åŠ¡é—´è¿›è¡Œç¼“å­˜çš„æ–‡ä»¶å’Œç›®å½•ï¼Œä½ åªèƒ½ä½¿ç”¨é¡¹ç›®å·¥ä½œç©ºé—´å†…çš„è·¯å¾„æ¥æŒ‡å®šç¼“å­˜ã€‚å¸¸ç”¨çš„å°±æ˜¯è®²node_modulesä¸­çš„ä»£ç è¿›è¡Œç¼“å­˜ï¼Œä¸è¦é‡å¤çš„å®‰è£…ã€‚</p><blockquote><p>1) cacheå¯ä»¥å…¨å±€ï¼Œä¹Ÿå¯ä»¥å±äºæŸä¸ªstageã€‚<br><br>2) cacheå¯ä»¥æŒ‡å®šè·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•´ä¸ªgité¡¹ç›®ã€‚<br><br>3) ç®¡ç†ç•Œé¢ä¼šæœ‰æŒ‰é’®â€œClear Runner caches buttonâ€ï¼Œä¼šç›´æ¥åˆ é™¤å·²ç»ç¼“å­˜çš„æ•°æ®ã€‚<br></p></blockquote><h3 id="before-script"><a href="#before-script" class="headerlink" title="before_script"></a>before_script</h3><p>å®šä¹‰ä»»ä½• Jobs è¿è¡Œå‰éƒ½ä¼šæ‰§è¡Œçš„å‘½ä»¤ã€‚</p><h2 id="2ã€gitlab-runner"><a href="#2ã€gitlab-runner" class="headerlink" title="2ã€gitlab-runner"></a>2ã€gitlab-runner</h2><p>Gitlab Runneræ˜¯ä¸€ä¸ªå¼€æºçš„é¡¹ç›®ï¼Œç”¨æ¥è¿è¡Œä½ çš„jobsï¼Œç„¶åå‘é€è¿è¡Œçš„ç»“æœåˆ°Gitlabã€‚å®ƒå’ŒGitlab CIç®¡ç†ä½¿ç”¨ï¼Œæ˜¯Gitlabä¸­ä¸€ä¸ªå¼€æºçš„æŒç»­é›†æˆæœåŠ¡ã€‚GitLab8.0ä»¥åçš„ç‰ˆæœ¬æ˜¯é»˜è®¤é›†æˆäº†GitLab-CIå¹¶ä¸”é»˜è®¤å¯ç”¨çš„ã€‚</p><p>GitLab-Runneræ˜¯é…åˆGitLab-CIè¿›è¡Œä½¿ç”¨çš„ã€‚ä¸€èˆ¬åœ°ï¼ŒGitLabé‡Œé¢çš„æ¯ä¸€ä¸ªå·¥ç¨‹éƒ½ä¼šå®šä¹‰ä¸€ä¸ªå±äºè¿™ä¸ªå·¥ç¨‹çš„è½¯ä»¶é›†æˆè„šæœ¬ï¼Œç”¨æ¥è‡ªåŠ¨åŒ–åœ°å®Œæˆä¸€äº›è½¯ä»¶é›†æˆå·¥ä½œã€‚å½“è¿™ä¸ªå·¥ç¨‹çš„ä»“åº“ä»£ç å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œæ¯”å¦‚æœ‰äººpushäº†ä»£ç ï¼ŒGitLabå°±ä¼šå°†è¿™ä¸ªå˜åŠ¨é€šçŸ¥GitLab-CIã€‚è¿™æ—¶GitLab-CIä¼šæ‰¾å‡ºä¸è¿™ä¸ªå·¥ç¨‹ç›¸å…³è”çš„Runnerï¼Œå¹¶é€šçŸ¥è¿™äº›RunneræŠŠä»£ç æ›´æ–°åˆ°æœ¬åœ°å¹¶æ‰§è¡Œé¢„å®šä¹‰å¥½çš„æ‰§è¡Œè„šæœ¬ã€‚</p><p><img src="https://i.imgur.com/5AX3UVI.jpg" alt="image"></p><p>æ¯ä¸ªRunneréƒ½å¯ä»¥åˆ†å¼€éƒ¨ç½²åˆ°ç‹¬ç«‹çš„æœºå™¨ä¸Šï¼ŒåŒä¸€ä¸ªä¸»æœºä¸Šä¹Ÿå¯ä»¥æœ‰å¤šä¸ªRunnerï¼ŒRunnerè¿è¡Œä¸ä¼šå½±å“Gitlabçš„è¿è¡Œã€‚æ‰€ä»¥ï¼ŒGitLab-Runnerå°±æ˜¯ä¸€ä¸ªç”¨æ¥æ‰§è¡Œè½¯ä»¶é›†æˆè„šæœ¬çš„ä¸œè¥¿ã€‚ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼šRunnerå°±åƒä¸€ä¸ªä¸ªçš„å·¥äººï¼Œè€ŒGitLab-CIå°±æ˜¯è¿™äº›å·¥äººçš„ä¸€ä¸ªç®¡ç†ä¸­å¿ƒï¼Œæ‰€æœ‰å·¥äººéƒ½è¦åœ¨GitLab-CIé‡Œé¢ç™»è®°æ³¨å†Œï¼Œå¹¶ä¸”è¡¨æ˜è‡ªå·±æ˜¯ä¸ºå“ªä¸ªå·¥ç¨‹æœåŠ¡çš„ã€‚å½“ç›¸åº”çš„å·¥ç¨‹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒGitLab-CIå°±ä¼šé€šçŸ¥ç›¸åº”çš„å·¥äººæ‰§è¡Œè½¯ä»¶é›†æˆè„šæœ¬ã€‚</p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å‚è€ƒ<a href="https://docs.gitlab.com/runner/install/index.html" target="_blank" rel="noopener">Gitlab Runnerç½‘ç«™</a>ã€‚æˆ‘æ˜¯åœ¨Centosä¸Šé¢å®‰è£…ï¼Œå‚è€ƒçš„æ˜¯<a href="https://docs.gitlab.com/runner/install/linux-repository.html" target="_blank" rel="noopener">é€šè¿‡ä»£ç ä»“åº“å®‰è£…çš„æ–¹å¼</a>ã€‚</p><pre><code># 1 Add GitLabâ€™s official repository:# For RHEL/CentOS/Fedoracurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash# 2 Install the latest version of GitLab Runner# For RHEL/CentOS/Fedorasudo yum install gitlab-runner</code></pre><h3 id="æ³¨å†ŒCIæœåŠ¡"><a href="#æ³¨å†ŒCIæœåŠ¡" class="headerlink" title="æ³¨å†ŒCIæœåŠ¡"></a>æ³¨å†ŒCIæœåŠ¡</h3><p>ç°åœ¨æˆ‘ä»¬éœ€è¦å°†Gitlab CIå’ŒGitlab Runnerå…³è”èµ·æ¥ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯å°†.gitlab-ci.ymlæ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹ç›®å½•ã€‚</p><p>ç¬¬äºŒæ­¥æ˜¯åˆ°Gitlab Runnerå®‰è£…çš„æœåŠ¡å™¨é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æ³¨å†Œä¸€ä¸ªRunnerï¼Œæ³¨å†Œæ­¥éª¤å¦‚ä¸‹ã€‚</p><pre><code># https://docs.gitlab.com/runner/register/index.htmlsudo gitlab-runner register</code></pre><p>è¾“å…¥Gitlabçš„æ ¹ç›®å½•åœ°å€</p><pre><code>Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com )http://182.254.153.226/</code></pre><p>è¯·è¾“å…¥æ³¨å†ŒRunneræ‰€éœ€çš„tokenï¼Œè¿™ä¸ªæ˜¯æ¯ä¸ªé¡¹ç›®å”¯ä¸€çš„</p><pre><code>Please enter the gitlab-ci token for this runnerxxxx-xx-x-x-xxx</code></pre><p>è¾“å…¥è¯¥Runnerçš„ä¸€ä¸ªæè¿°ä¿¡æ¯ï¼Œå¯ä»¥åœ¨Gitlabä¸­ä¿®æ”¹</p><pre><code>Please enter the gitlab-ci description for this runnermy-runner</code></pre><p>è¾“å…¥Runnerç›¸å…³è”çš„tagsï¼ŒGitlabé¡¹ç›®å¯ä»¥æŒ‡å®štagsæ¥é€‰æ‹©ä½¿ç”¨å“ªä¸ªRunner</p><pre><code>Please enter the gitlab-ci tags for this runner (comma separated):my-tag,another-tag</code></pre><p>è¾“å…¥æ‰§è¡ŒRunnerçš„æ–¹å¼ï¼Œæˆ‘ä»¬ç›®å‰éƒ½æ˜¯ç”¨çš„shell</p><pre><code>Please enter the executor: ssh, docker+machine, docker-ssh+machine, kubernetes, docker, parallels, virtualbox, docker-ssh, shell:shell</code></pre><p>urlå’Œtokenè·å–çš„æ–¹å¼ï¼Œæ ¹æ®Gitlabçš„ç‰ˆæœ¬ä¸åŒï¼Œç•¥æœ‰ä¸åŒï¼Œæˆ‘ä»¬çš„Gitlabç‰ˆæœ¬æ˜¯10.4.2-eeï¼Œè·å–æ–¹å¼å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://i.imgur.com/KxmBeaY.jpg" alt="image"></p><p><img src="https://i.imgur.com/3gJT28R.jpg" alt="image"></p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å½“å‰é¡¹ç›®ä¸­ä½¿ç”¨CIæœåŠ¡äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜å¯ä»¥æ§åˆ¶ä»€ä¹ˆæ—¶å€™è§¦å‘ä¸€ä¸ªPipelineï¼Œåé¢æˆ‘ä»¬ä¼šè¯¦ç»†è®²è§£å¸¸ç”¨çš„å‡ ç§æ–¹å¼ã€‚</p><h1 id="è§¦å‘æ–¹å¼"><a href="#è§¦å‘æ–¹å¼" class="headerlink" title="è§¦å‘æ–¹å¼"></a>è§¦å‘æ–¹å¼</h1><p>é»˜è®¤æ¯æ¬¡æˆ‘ä»¬Pushçš„æ—¶å€™éƒ½ä¼šè§¦å‘Gitlab CIå»è¿è¡Œä¸€ä¸ªPipelineï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¯ä»¥æ§åˆ¶è§¦å‘Pipelineçš„æ—¶æœºï¼Œä»¥åŠæ§åˆ¶æ˜¯è‡ªåŠ¨æ‰§è¡Œè¿˜æ˜¯æ‰‹åŠ¨æ‰§è¡Œã€‚</p><p>é¦–å…ˆæˆ‘ä»¬çŸ¥é“Pipelineä¸­åŒ…å«å¤šä¸ªStageï¼ŒStageä¸­åˆåˆ†ä¸ºå¤šä¸ªJobæ¥æ‰§è¡Œï¼Œ.gitlab-ci.ymlä¸­æˆ‘ä»¬å¯¹æ¯ä¸ªJobè¿›è¡Œè¡Œä¸ºé…ç½®ï¼Œæ¥æ§åˆ¶æ‰§è¡Œçš„æ—¶æœºï¼Œä»è€Œæ§åˆ¶Pipelineæ‰§è¡Œçš„æ—¶æœºã€‚</p><h2 id="only"><a href="#only" class="headerlink" title="only"></a>only</h2><p>é¦–å…ˆï¼Œæ˜¯onlyå’Œexcepté…ç½®ï¼Œä¸¤ä¸ªå‚æ•°è¯´æ˜äº†jobä»€ä¹ˆæ—¶å€™å°†ä¼šè¢«åˆ›å»ºï¼Œæˆ‘ä»¬ä¸»è¦åœ¨ä½¿ç”¨onlyï¼Œä¸‹é¢æ˜¯onlyå¯ç”¨çš„ä¸€äº›å€¼ã€‚</p><table><thead><tr><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>branches</strong></td><td>å½“ä¸€ä¸ªåˆ†æ”¯è¢«pushä¸Šæ¥ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå…·ä½“çš„åˆ†æ”¯åï¼Œæ¯”å¦‚masterï¼Œreleaseç­‰ã€‚</td></tr><tr><td><strong>tags</strong></td><td>å½“ä¸€ä¸ªæ‰“äº†tagçš„åˆ†æ”¯è¢«pushä¸Šæ¥</td></tr><tr><td>api</td><td>å½“ä¸€ä¸ªpiplineè¢«piplines apiæ‰€è§¦å‘è°ƒèµ·ï¼Œè¯¦è§piplines api</td></tr><tr><td>external</td><td>å½“ä½¿ç”¨äº†GitLabä»¥å¤–çš„CIæœåŠ¡</td></tr><tr><td>pipelines</td><td>é’ˆå¯¹å¤šé¡¹ç›®è§¦å‘å™¨è€Œè¨€ï¼Œå½“ä½¿ç”¨CI_JOB_TOKENå¹¶ä½¿ç”¨gitlabæ‰€æä¾›çš„apiåˆ›å»ºå¤šä¸ªpipelinesçš„æ—¶å€™</td></tr><tr><td>pushes</td><td>å½“pipelineè¢«ç”¨æˆ·çš„git pushæ“ä½œæ‰€è§¦å‘çš„æ—¶å€™</td></tr><tr><td>schedules</td><td>é’ˆå¯¹é¢„å®šå¥½çš„piplineè€Œè¨€ï¼ˆæ¯æ—¥æ„å»ºä¸€ç±»~ï¼Œå…·ä½“è¯·çœ‹é“¾æ¥ï¼‰</td></tr><tr><td>triggers</td><td>ç”¨tokenåˆ›å»ºpiplinesçš„æ—¶å€™</td></tr><tr><td><strong>web</strong></td><td>åœ¨GitLabé¡µé¢ä¸ŠPipelinesæ ‡ç­¾é¡µä¸‹ï¼Œä½ æŒ‰äº†run piplineçš„æ—¶å€™</td></tr><tr><td><em>merge_requests</em></td><td>åˆ›å»ºæˆ–è€…æ›´æ–°merge requestçš„æ—¶å€™ï¼Œä½†æ˜¯<em>åªæœ‰Gitlab 11.6ä»¥ä¸Šçš„ç‰ˆæœ¬å¯ä»¥ç”¨</em></td></tr></tbody></table><h3 id="web"><a href="#web" class="headerlink" title="web"></a>web</h3><p>webçš„æ„æ€å°±æ˜¯ä¸è¦è‡ªåŠ¨åˆ›å»ºJobï¼Œè¦ç”¨æˆ·è‡ªå·±æ‰‹åŠ¨å»Run Pipelineçš„æ—¶å€™å†åˆ›å»ºã€‚è¿™ç§æ–¹å¼ä¸»è¦ç”¨åœ¨æˆ‘ä»¬å¸Œæœ›æ‰‹åŠ¨å»è§¦å‘Pipelineçš„æ—¶å€™ï¼Œæµç¨‹å¯ä»¥ç”±æˆ‘ä»¬æ§åˆ¶ã€‚è€Œä¸”ï¼Œå¯ä»¥é€‰æ‹©æŒ‡å®šçš„åˆ†æ”¯å»ä¸Šçº¿ï¼Œè¿™æ ·å¯ä»¥é€šè¿‡git diffå‡ºå’Œmasteråˆ†æ”¯ä¸åŒçš„ä»£ç ï¼Œç„¶åä¸Šä¼ ä¸ƒç‰›ã€‚ä¸»è¦æ˜¯ä¸ºäº†è§£å†³<a href="http://www.che300.comå›¾ç‰‡å’Œä»£ç å¤ªå¤šä¸æ–¹ä¾¿ä¸€æ¬¡æ€§å…¨éƒ¨ä¸Šçº¿çš„é—®é¢˜ã€‚" target="_blank" rel="noopener">www.che300.comå›¾ç‰‡å’Œä»£ç å¤ªå¤šä¸æ–¹ä¾¿ä¸€æ¬¡æ€§å…¨éƒ¨ä¸Šçº¿çš„é—®é¢˜ã€‚</a></p><p>è¿™ç§é¡¹ç›®æˆ‘ä»¬è¿˜å¯ä»¥å¼€å¯Settingsâ€“&gt;Generalâ€“&gt;Merge request settingsä¸­çš„Only allow merge requests to be merged if the pipeline succeedsåŠŸèƒ½ã€‚è¿™æ ·å½“å½“å‰é¡¹ç›®æäº¤mergeçš„åŒæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªpipelineï¼Œåœ¨Pipelineæ²¡æœ‰å®Œæˆä¹‹å‰ï¼Œmerge requestä¸èƒ½åˆå¹¶ï¼Œè¿™æ ·ä¼šå‡å°‘åˆå¹¶ä»£ç ä¹‹åä¸å¥½diffä¸Šçº¿ä»£ç çš„é—®é¢˜ã€‚</p><h3 id="master"><a href="#master" class="headerlink" title="master"></a>master</h3><p>å½“æœ‰ä»£ç åˆå¹¶åˆ°masteråˆ†æ”¯çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºè¯¥Jobï¼Œä»è€Œåœ¨Pipelineé¡µé¢å°±ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„Pipelineã€‚æ¯”å¦‚fe-wikié¡¹ç›®å°±æ˜¯ä½¿ç”¨masteråˆ†æ”¯å‘å¸ƒçš„ï¼Œæˆ‘ä»¬ä¸€æ—¦æ›´æ–°äº†masterä»£ç ï¼Œä¼šæ‰§è¡ŒæŒ‡å®šçš„Jobï¼Œæ¯”å¦‚installã€buildï¼Œç„¶åå°†ç¼–è¯‘å¥½çš„Gitbookå‘é€åˆ°æŒ‡å®šçš„æœåŠ¡å™¨ä¸Šã€‚</p><h3 id="release"><a href="#release" class="headerlink" title="release"></a>release</h3><p>å½“æœ‰ä»£ç åˆå¹¶åˆ°releaseåˆ†æ”¯çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºè¯¥Jobï¼Œä»è€Œåœ¨Pipelineé¡µé¢å°±ä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„Pipelineã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨releaseåˆ†æ”¯å‘å¸ƒï¼Œè€Œä¸æ˜¯masteråˆ†æ”¯ï¼ŒåŸå› æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨quploaderçš„gitæ¨¡å¼ä¸Šçº¿çš„æ—¶å€™ï¼Œä»£ç å¿…é¡»å’Œè¿œç¨‹masteråˆ†æ”¯diffå‡ºä¸åŒçš„ä»£ç ï¼Œå†ä¸Šçº¿ï¼Œå¦‚æœå…ˆåˆå¹¶åˆ°masteråˆ†æ”¯äº†ï¼Œå°±æ²¡åŠæ³•å»diffäº†ã€‚æ‰€ä»¥ï¼Œpicså’Œlibsé¡¹ç›®ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç”¨äº†releaseåˆ†æ”¯å»å‘å¸ƒäº†ã€‚</p><h3 id="tags"><a href="#tags" class="headerlink" title="tags"></a>tags</h3><p>è¿™ç§æ–¹å¼ç±»ä¼¼äºwebï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦å…ˆæ‰“ä¸€ä¸ªtagï¼Œç„¶åå°±ä¼šè‡ªåŠ¨åˆ›å»ºJobå’ŒPipelineï¼Œç„¶åå°±å¯ä»¥å‘å¸ƒä¸Šçº¿ã€‚è¿™æ ·æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯æ–¹ä¾¿åç»­å›æ»šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åŸºäºæŸä¸ªtagå»é‡æ–°å‘å¸ƒä»£ç ã€‚</p><h2 id="when"><a href="#when" class="headerlink" title="when"></a>when</h2><p>å‰é¢æåˆ°æˆ‘ä»¬å¯ä»¥åšåˆ°å½“Jobåˆ›å»ºä¹‹åè‡ªåŠ¨æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œï¼Œä¾é çš„å°±æ˜¯whenï¼Œwhenå‚æ•°æ˜¯ç¡®å®šè¯¥jobåœ¨å¤±è´¥æˆ–è€…æ²¡å¤±è´¥çš„æ—¶å€™æ‰§è¡Œä¸æ‰§è¡Œçš„å‚æ•°ã€‚</p><table><thead><tr><th>å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>on_success</td><td>åªæœ‰åœ¨ä¹‹å‰åœºæ™¯æ‰§è¡Œçš„æ‰€æœ‰ä½œä¸šæˆåŠŸçš„æ—¶å€™æ‰æ‰§è¡Œå½“å‰jobï¼Œè¿™ä¸ªå°±æ˜¯é»˜è®¤å€¼ï¼Œæˆ‘ä»¬ç”¨æœ€å°é…ç½®çš„æ—¶å€™ä»–é»˜è®¤å°±æ˜¯è¿™ä¸ªå€¼ï¼Œæ‰€ä»¥å¤±è´¥çš„æ—¶å€™pipelineä¼šåœæ­¢æ‰§è¡Œåç»­ä»»åŠ¡</td></tr><tr><td>on_failure</td><td>åªæœ‰åœ¨ä¹‹å‰åœºæ™¯æ‰§è¡Œçš„ä»»åŠ¡ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå¤±è´¥çš„æ—¶å€™æ‰æ‰§è¡Œ</td></tr><tr><td>always</td><td>ä¸ç®¡ä¹‹å‰åœºæ™¯é˜¶æ®µçš„çŠ¶æ€ï¼Œæ€»æ˜¯æ‰§è¡Œ</td></tr><tr><td>manual</td><td>~æ‰‹åŠ¨æ‰§è¡Œjobçš„æ—¶å€™è§¦å‘ï¼ˆwebuiä¸Šç‚¹çš„ï¼‰ã€‚è¯·é˜…è¯»<a href="https://segmentfault.com/a/1190000011890710#articleHeader9" target="_blank" rel="noopener">manual action</a></td></tr></tbody></table><p>ä¸‹é¢çš„é…ç½®å°±å¯ä»¥åšåˆ°ï¼Œå½“å‰Jobæ‰‹åŠ¨æ‰§è¡Œï¼Œè€Œä¸”æ‰§è¡ŒæˆåŠŸä¹‹å‰ï¼Œä¸ä¼šæ‰§è¡Œåç»­çš„Jobã€‚ç”¨åˆ°äº†allow_failureã€‚</p><pre><code>when: manualallow_failure: false</code></pre><p>allow_failureè¢«ç”¨äºå½“ä½ æƒ³å…è®¸jobå¤±è´¥è€Œä¸é˜»å¡å‰©ä¸‹çš„CIå¥—ä»¶æ‰§è¡Œçš„æ—¶å€™ï¼Œå¤±è´¥çš„jobä¸ä¼šå½±å“åˆ°commitçŠ¶æ€(pipelinesæ‰§è¡Œå®Œä¼šåœ¨commitä¸Šæ ‡è®°å¤±è´¥æˆ–æˆåŠŸçŠ¶æ€ï¼Œä½†æ˜¯ä¸ä¼šé˜»æ­¢commitæäº¤)ã€‚</p><p>å½“allow_failureä¸ºtrueï¼Œå¹¶ä¸”jobå¤±è´¥äº†ï¼Œpiplineå°†ä¼šç½®ç»¿æˆ–è€…ç½®æˆåŠŸæ˜¾ç¤ºï¼Œä½†æ˜¯ä½ ä¼šåœ¨commité¡µé¢æˆ–è€…jobé¡µé¢çœ‹åˆ°ä¸€æ¡â€œCI build passed with warningsâ€çš„è­¦å‘Šä¿¡æ¯å“ˆã€‚</p><p>å½“allow_failureä¸ºfalseï¼Œå½“å‰Jobæ‰§è¡ŒæˆåŠŸï¼ˆæ³¨æ„æ˜¯æˆåŠŸä¸æ˜¯å®Œæˆï¼‰ä¹‹å‰ï¼Œåç»­çš„Jobæ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼Œä»è€Œè¾¾åˆ°äº†é˜»å¡æ‰€æœ‰åç»­Jobçš„åŠŸèƒ½ã€‚</p><h1 id="æƒé™"><a href="#æƒé™" class="headerlink" title="æƒé™"></a>æƒé™</h1><p>æˆ‘ä»¬åœ¨ä½¿ç”¨Gitlab Runnerçš„æ—¶å€™ï¼Œåœ¨æœåŠ¡å™¨ä¸Šä¼šåˆ›å»ºä¸€ä¸ªgitlab-runnerçš„ç”¨æˆ·ï¼Œå®ƒçš„ç”¨æˆ·æƒé™æ˜¯å—é™çš„ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå‘ç°è¿‡npm installçš„æ—¶å€™æ€»æ˜¯å¤±è´¥çš„æƒ…å†µï¼Œå› æ­¤éœ€è¦ç»™å®ƒèµ‹äºˆRootæƒé™ã€‚</p><p>æˆ‘ä»¬éœ€è¦å¯¹/etc/sudoers æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå¢åŠ gitlab-runnerç”¨æˆ·çš„è¿è¡Œsudoçš„èƒ½åŠ›ã€‚</p><pre><code>sudo EDITOR=vi visudovi /etc/sudoers</code></pre><p>åœ¨æ–‡ä»¶æœ€åçš„ä½ç½®å¢åŠ ä¸‹é¢çš„ä»£ç ï¼Œç„¶åä¿å­˜</p><pre><code>gitlab-runner ALL=(ALL) NOPASSWD: ALL</code></pre><p>ç„¶åå°±å¯ä»¥ä½¿ç”¨ sudo npm install æ¥å®‰è£…å¯¹åº”çš„npmä¾èµ–ã€‚</p><blockquote><p>ã€æ³¨ã€‘ï¼šä½¿ç”¨sudoç”Ÿæˆçš„æ–‡ä»¶éƒ½æœ‰å¯èƒ½ä¼šå‡ºç°åˆ é™¤å¤±è´¥çš„æƒ…å†µã€‚æ¯”å¦‚npm run dist ç”Ÿæˆçš„distæ–‡ä»¶ã€‚ä»¥åŠå½“ä½¿ç”¨â€œClear Runner caches buttonâ€æŒ‰é’®åˆ é™¤å¯¼è‡´çš„node_modulesç›®å½•ï¼Œä¹Ÿä¼šå‡ºç°åˆ é™¤ä¸äº†çš„é—®é¢˜ã€‚</p></blockquote><h1 id="é¡¹ç›®åº”ç”¨"><a href="#é¡¹ç›®åº”ç”¨" class="headerlink" title="é¡¹ç›®åº”ç”¨"></a>é¡¹ç›®åº”ç”¨</h1><p><img src="https://yhpics.oss-cn-beijing.aliyuncs.com/img/blog/projs.png" alt=""></p><h1 id="å¤§æ€»ç»“"><a href="#å¤§æ€»ç»“" class="headerlink" title="å¤§æ€»ç»“"></a>å¤§æ€»ç»“</h1><p>åŸºäºGitlab CI å’Œ Gitlab Runneræ¥å®ç°äº†ç›¸å…³é¡¹ç›®çš„æŒç»­é›†æˆä»¥åŠè‡ªåŠ¨éƒ¨ç½²ã€‚åç»­å¯ä»¥æ ¹æ®éœ€è¦çš„æƒ…å†µï¼Œæ¥åˆç†é…ç½®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> skill </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vueç»„ä»¶åŒ–å¸¸ç”¨æŠ€æœ¯</title>
      <link href="/2019/12/24/zu-jian-hua-chang-yong-ji-zhu/"/>
      <url>/2019/12/24/zu-jian-hua-chang-yong-ji-zhu/</url>
      
        <content type="html"><![CDATA[<h1 id="Vueç»„ä»¶åŒ–å¸¸ç”¨æŠ€æœ¯"><a href="#Vueç»„ä»¶åŒ–å¸¸ç”¨æŠ€æœ¯" class="headerlink" title="Vueç»„ä»¶åŒ–å¸¸ç”¨æŠ€æœ¯"></a>Vueç»„ä»¶åŒ–å¸¸ç”¨æŠ€æœ¯</h1><h2 id="ç»„ä»¶ä¼ å€¼ã€é€šä¿¡"><a href="#ç»„ä»¶ä¼ å€¼ã€é€šä¿¡" class="headerlink" title="ç»„ä»¶ä¼ å€¼ã€é€šä¿¡"></a>ç»„ä»¶ä¼ å€¼ã€é€šä¿¡</h2><h3 id="çˆ¶ç»„ä»¶-gt-å­ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶-gt-å­ç»„ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶ =&gt; å­ç»„ä»¶:"></a>çˆ¶ç»„ä»¶ =&gt; å­ç»„ä»¶:</h3><ul><li>å±æ€§props </li></ul><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// child</span>props<span class="token punctuation">:</span> <span class="token punctuation">{</span> msg<span class="token punctuation">:</span> String <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>HelloWorld msg<span class="token operator">=</span><span class="token string">"Welcome to Your Vue.js App"</span><span class="token operator">/</span><span class="token operator">></span></code></pre><ul><li>å¼•ç”¨refs </li></ul><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>HelloWorld ref<span class="token operator">=</span><span class="token string">"hw"</span><span class="token operator">/</span><span class="token operator">></span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>hw<span class="token punctuation">.</span>xx</code></pre><h3 id="å­ç»„ä»¶-gt-çˆ¶ç»„ä»¶-è‡ªå®šä¹‰äº‹ä»¶"><a href="#å­ç»„ä»¶-gt-çˆ¶ç»„ä»¶-è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="å­ç»„ä»¶ =&gt; çˆ¶ç»„ä»¶:è‡ªå®šä¹‰äº‹ä»¶"></a>å­ç»„ä»¶ =&gt; çˆ¶ç»„ä»¶:è‡ªå®šä¹‰äº‹ä»¶</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// child </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">,</span> good<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>Cart @add<span class="token operator">=</span><span class="token string">"cartAdd($event)"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">></span></code></pre><h3 id="å…„å¼Ÿç»„ä»¶-é€šè¿‡å…±åŒç¥–è¾ˆç»„ä»¶"><a href="#å…„å¼Ÿç»„ä»¶-é€šè¿‡å…±åŒç¥–è¾ˆç»„ä»¶" class="headerlink" title="å…„å¼Ÿç»„ä»¶:é€šè¿‡å…±åŒç¥–è¾ˆç»„ä»¶"></a>å…„å¼Ÿç»„ä»¶:é€šè¿‡å…±åŒç¥–è¾ˆç»„ä»¶</h3><blockquote><p>é€šè¿‡å…±åŒçš„ç¥–è¾ˆç»„ä»¶æ­æ¡¥ï¼Œ$parentæˆ–$rootã€‚ </p></blockquote><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// brother1</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// brother2 </span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span></code></pre><h3 id="ç¥–å…ˆå’Œåä»£ä¹‹é—´"><a href="#ç¥–å…ˆå’Œåä»£ä¹‹é—´" class="headerlink" title="ç¥–å…ˆå’Œåä»£ä¹‹é—´"></a>ç¥–å…ˆå’Œåä»£ä¹‹é—´</h3><ul><li>provide/inject:èƒ½å¤Ÿå®ç°ç¥–å…ˆç»™åä»£ä¼ å€¼ </li></ul><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ancestor</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>foo<span class="token punctuation">:</span> <span class="token string">'foo'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// descendant</span>inject<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'foo'</span><span class="token punctuation">]</span></code></pre><ul><li>dispatch:åä»£ç»™ç¥–å…ˆä¼ å€¼ </li></ul><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// å®šä¹‰ä¸€ä¸ªdispatchæ–¹æ³•ï¼ŒæŒ‡å®šè¦æ´¾å‘äº‹ä»¶åç§°å’Œæ•°æ® </span><span class="token keyword">function</span> <span class="token function">dispatch</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> parent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$parent    <span class="token comment" spellcheck="true">// åªè¦è¿˜å­˜åœ¨çˆ¶å…ƒç´ å°±ç»§ç»­å¾€ä¸ŠæŸ¥æ‰¾ </span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// çˆ¶å…ƒç´ ç”¨$emitè§¦å‘ </span>        parent<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span>data<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// é€’å½’æŸ¥æ‰¾çˆ¶å…ƒç´ </span>        parent <span class="token operator">=</span> parent<span class="token punctuation">.</span>$parent    <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token comment" spellcheck="true">// ä½¿ç”¨ï¼ŒHelloWorld.vue</span><span class="token operator">&lt;</span>h1 @click<span class="token operator">=</span><span class="token string">"dispatch('hello', 'hello,world')"</span><span class="token operator">></span><span class="token punctuation">{</span><span class="token punctuation">{</span> msg <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token comment" spellcheck="true">// App.vue</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sayHello<span class="token punctuation">)</span></code></pre><h3 id="ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´-äº‹ä»¶æ€»çº¿-æˆ–-vuex"><a href="#ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´-äº‹ä»¶æ€»çº¿-æˆ–-vuex" class="headerlink" title="ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´:äº‹ä»¶æ€»çº¿ æˆ– vuex"></a>ä»»æ„ä¸¤ä¸ªç»„ä»¶ä¹‹é—´:äº‹ä»¶æ€»çº¿ æˆ– vuex</h3><ul><li>äº‹ä»¶æ€»çº¿:åˆ›å»ºä¸€ä¸ªBusç±»è´Ÿè´£äº‹ä»¶æ´¾å‘ã€ç›‘å¬å’Œå›è°ƒç®¡ç† </li></ul><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Bus:äº‹ä»¶æ´¾å‘ã€ç›‘å¬å’Œå›è°ƒç®¡ç† </span><span class="token keyword">class</span> <span class="token class-name">Bus</span><span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// {</span>    <span class="token comment" spellcheck="true">//   eventName1:[fn1,fn2],</span>        <span class="token comment" spellcheck="true">// eventName2:[fn3,fn4], // }</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">$on</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">}</span>        <span class="token function">$emit</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>cb <span class="token operator">=</span><span class="token operator">></span> <span class="token function">cb</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// main.js</span>Vue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// child1</span><span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// child2 </span><span class="token keyword">this</span><span class="token punctuation">.</span>$bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span></code></pre><ul><li>vuex:åˆ›å»ºå”¯ä¸€çš„å…¨å±€æ•°æ®ç®¡ç†è€…storeï¼Œé€šè¿‡å®ƒç®¡ç†æ•°æ®å¹¶é€šçŸ¥ç»„ä»¶çŠ¶æ€å˜æ›´ </li></ul><h2 id="æ’æ§½"><a href="#æ’æ§½" class="headerlink" title="æ’æ§½"></a>æ’æ§½</h2><blockquote><p>Vue 2.6.0ä¹‹åé‡‡ç”¨å…¨æ–°v-slotè¯­æ³•å–ä»£ä¹‹å‰çš„slotã€slot-scope </p></blockquote><h3 id="åŒ¿åæ’æ§½"><a href="#åŒ¿åæ’æ§½" class="headerlink" title="åŒ¿åæ’æ§½"></a>åŒ¿åæ’æ§½</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// comp1</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>comp<span class="token operator">></span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>comp<span class="token operator">></span></code></pre><h3 id="å…·åæ’æ§½"><a href="#å…·åæ’æ§½" class="headerlink" title="å…·åæ’æ§½"></a>å…·åæ’æ§½</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// comp2</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span>    <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"content"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>Comp2<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> é»˜è®¤æ’æ§½ç”¨<span class="token keyword">default</span>åšå‚æ•° <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token punctuation">:</span><span class="token keyword">default</span><span class="token operator">></span>å…·åæ’æ§½<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> å…·åæ’æ§½ç”¨æ’æ§½ååšå‚æ•° <span class="token operator">--</span><span class="token operator">></span>    <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token punctuation">:</span>content<span class="token operator">></span>å†…å®¹<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Comp2<span class="token operator">></span></code></pre><h3 id="ä½œç”¨åŸŸæ’æ§½"><a href="#ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½œç”¨åŸŸæ’æ§½"></a>ä½œç”¨åŸŸæ’æ§½</h3><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// comp3</span><span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>slot <span class="token punctuation">:</span>foo<span class="token operator">=</span><span class="token string">"foo"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token comment" spellcheck="true">// parent</span><span class="token operator">&lt;</span>Comp3<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> æŠŠv<span class="token operator">-</span>slotçš„å€¼æŒ‡å®šä¸ºä½œç”¨åŸŸä¸Šä¸‹æ–‡å¯¹è±¡ <span class="token operator">--</span><span class="token operator">></span>  <span class="token operator">&lt;</span>template v<span class="token operator">-</span>slot<span class="token punctuation">:</span><span class="token keyword">default</span><span class="token operator">=</span><span class="token string">"ctx"</span><span class="token operator">></span>        æ¥è‡ªå­ç»„ä»¶æ•°æ®<span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token punctuation">{</span>ctx<span class="token punctuation">.</span>foo<span class="token punctuation">}</span><span class="token punctuation">}</span>     <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>Comp3<span class="token operator">></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>éšæœºç”Ÿæˆä¸é‡å¤å€¼</title>
      <link href="/2019/12/23/yong-di-gui-suan-fa-shi-xian-shu-zu-chang-du-wei-5-qie-yuan-su-de-sui-ji-shu-zai-2-32-jian-bu-chong-fu-de-zhi/"/>
      <url>/2019/12/23/yong-di-gui-suan-fa-shi-xian-shu-zu-chang-du-wei-5-qie-yuan-su-de-sui-ji-shu-zai-2-32-jian-bu-chong-fu-de-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="ç”¨é€’å½’ç®—æ³•å®ç°ï¼Œæ•°ç»„é•¿åº¦ä¸º5ä¸”å…ƒç´ çš„éšæœºæ•°åœ¨2-32é—´ä¸é‡å¤çš„å€¼"><a href="#ç”¨é€’å½’ç®—æ³•å®ç°ï¼Œæ•°ç»„é•¿åº¦ä¸º5ä¸”å…ƒç´ çš„éšæœºæ•°åœ¨2-32é—´ä¸é‡å¤çš„å€¼" class="headerlink" title="ç”¨é€’å½’ç®—æ³•å®ç°ï¼Œæ•°ç»„é•¿åº¦ä¸º5ä¸”å…ƒç´ çš„éšæœºæ•°åœ¨2-32é—´ä¸é‡å¤çš„å€¼"></a>ç”¨é€’å½’ç®—æ³•å®ç°ï¼Œæ•°ç»„é•¿åº¦ä¸º5ä¸”å…ƒç´ çš„éšæœºæ•°åœ¨2-32é—´ä¸é‡å¤çš„å€¼</h2><p><strong>æè¿°</strong>ï¼š</p><ul><li>ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º5çš„ç©ºæ•°ç»„arr</li><li>ç”Ÿæˆä¸€ä¸ªï¼ˆ2ï¼32ï¼‰ä¹‹é—´çš„éšæœºæ•´æ•°rand</li><li>æŠŠéšæœºæ•°randæ’å…¥åˆ°æ•°ç»„arrå†…ï¼Œå¦‚æœæ•°ç»„arrå†…å·²å­˜åœ¨ä¸randç›¸åŒçš„æ•°å­—ï¼Œåˆ™é‡æ–°ç”Ÿæˆéšæœºæ•°randå¹¶æ’å…¥åˆ°arrå†…[éœ€è¦ä½¿ç”¨é€’å½’å®ç°ï¼Œä¸èƒ½ä½¿ç”¨for/whileç­‰å¾ªç¯]</li><li>æœ€ç»ˆè¾“å‡ºä¸€ä¸ªé•¿åº¦ä¸º5ï¼Œä¸”å†…å®¹ä¸é‡å¤çš„æ•°ç»„arrã€‚</li></ul><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">buildArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> length<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>max <span class="token operator">-</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> min<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>    <span class="token keyword">return</span> arr<span class="token punctuation">.</span>length <span class="token operator">===</span> length <span class="token operator">?</span> arr <span class="token punctuation">:</span> <span class="token function">buildArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> length<span class="token punctuation">,</span> min<span class="token punctuation">,</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">buildArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">table</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> alg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å»å­—ç¬¦ä¸²ä¸­ç©ºæ ¼</title>
      <link href="/2019/12/23/xie-yi-ge-fang-fa-qu-diao-zi-fu-chuan-zhong-de-kong-ge/"/>
      <url>/2019/12/23/xie-yi-ge-fang-fa-qu-diao-zi-fu-chuan-zhong-de-kong-ge/</url>
      
        <content type="html"><![CDATA[<h2 id="å†™ä¸€ä¸ªæ–¹æ³•å»æ‰å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼"><a href="#å†™ä¸€ä¸ªæ–¹æ³•å»æ‰å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼" class="headerlink" title="å†™ä¸€ä¸ªæ–¹æ³•å»æ‰å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼"></a>å†™ä¸€ä¸ªæ–¹æ³•å»æ‰å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼</h2><ul><li>å†™ä¸€ä¸ªæ–¹æ³•å»æ‰å­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼</li><li>è¦æ±‚ä¼ å…¥ä¸åŒçš„ç±»å‹åˆ†åˆ«èƒ½å»æ‰å‰ã€åã€å‰åã€ä¸­é—´çš„ç©ºæ ¼</li></ul><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'  s t  r  '</span><span class="token keyword">const</span> POSITION <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  left<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  right<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  both<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  center<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  all<span class="token punctuation">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">trim</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> position <span class="token operator">=</span> POSITION<span class="token punctuation">.</span>both<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>POSITION<span class="token punctuation">[</span>position<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'unexpected position value'</span><span class="token punctuation">)</span>  <span class="token keyword">switch</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">case</span><span class="token punctuation">(</span>POSITION<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">:</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\s+/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">case</span><span class="token punctuation">(</span>POSITION<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">:</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+$/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">case</span><span class="token punctuation">(</span>POSITION<span class="token punctuation">.</span>both<span class="token punctuation">)</span><span class="token punctuation">:</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/^\s+/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s+$/</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">case</span><span class="token punctuation">(</span>POSITION<span class="token punctuation">.</span>center<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\w\s+\w/</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\w)(\s+)(\w)/</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`$1$3`</span></span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">case</span><span class="token punctuation">(</span>POSITION<span class="token punctuation">.</span>all<span class="token punctuation">)</span><span class="token punctuation">:</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\s/g</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">break</span><span class="token punctuation">;</span>      <span class="token keyword">default</span><span class="token punctuation">:</span>   <span class="token punctuation">}</span>  <span class="token keyword">return</span> str<span class="token punctuation">}</span><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`|</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">|`</span></span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//  |s t  r| </span></code></pre>]]></content>
      
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> alg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äº‹ä»¶æ€»çº¿busè§£å†³å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼</title>
      <link href="/2019/12/23/zong-xian-bus-jie-jue-xiong-di-zu-jian-chuan-zhi/"/>
      <url>/2019/12/23/zong-xian-bus-jie-jue-xiong-di-zu-jian-chuan-zhi/</url>
      
        <content type="html"><![CDATA[<h2 id="äº‹ä»¶æ€»çº¿busè§£å†³å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼"><a href="#äº‹ä»¶æ€»çº¿busè§£å†³å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼" class="headerlink" title="äº‹ä»¶æ€»çº¿busè§£å†³å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼"></a>äº‹ä»¶æ€»çº¿busè§£å†³å…„å¼Ÿç»„ä»¶ä¹‹é—´çš„ä¼ å€¼</h2><p>å®é™…è¿ç”¨ï¼š</p><p>å°è£…ä¸€ä¸ª<code>Bus.js</code></p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">const</span> Bus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> Bus </code></pre><p>åœ¨ç»„ä»¶è°ƒç”¨æ—¶å¼•å…¥</p><p>ç»„ä»¶ä¸€ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Bus <span class="token keyword">from</span> <span class="token string">'./Bus'</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>      <span class="token operator">...</span><span class="token punctuation">.</span>      Bus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">,</span> <span class="token number">120</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">}</span></code></pre><p>ç»„ä»¶äºŒï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">import</span> Bus <span class="token keyword">from</span> <span class="token string">'./Bus'</span>  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token operator">...</span><span class="token operator">...</span><span class="token operator">...</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    mounted <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      Bus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'log'</span><span class="token punctuation">,</span> content <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°</title>
      <link href="/2019/12/23/zhao-chu-zi-fu-chuan-zhong-lian-xu-chu-xian-zui-duo-de-zi-fu-he-ge-shu/"/>
      <url>/2019/12/23/zhao-chu-zi-fu-chuan-zhong-lian-xu-chu-xian-zui-duo-de-zi-fu-he-ge-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°"><a href="#æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°" class="headerlink" title="æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°"></a>æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­è¿ç»­å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œä¸ªæ•°</h1><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/(\w)\1*/g</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> maxLen <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>s <span class="token operator">=</span><span class="token operator">></span> s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> result <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pre<span class="token punctuation">,</span> curr<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>curr<span class="token punctuation">.</span>length <span class="token operator">===</span> maxLen<span class="token punctuation">)</span> <span class="token punctuation">{</span>    pre<span class="token punctuation">[</span>curr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> curr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> pre<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> alg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Vue.observableè¿›è¡ŒçŠ¶æ€ç®¡ç†</title>
      <link href="/2019/12/23/shi-yong-vue.observable-jin-xing-zhuang-tai-guan-li/"/>
      <url>/2019/12/23/shi-yong-vue.observable-jin-xing-zhuang-tai-guan-li/</url>
      
        <content type="html"><![CDATA[<h1 id="ä½¿ç”¨Vue-observable-è¿›è¡ŒçŠ¶æ€ç®¡ç†"><a href="#ä½¿ç”¨Vue-observable-è¿›è¡ŒçŠ¶æ€ç®¡ç†" class="headerlink" title="ä½¿ç”¨Vue.observable()è¿›è¡ŒçŠ¶æ€ç®¡ç†"></a>ä½¿ç”¨Vue.observable()è¿›è¡ŒçŠ¶æ€ç®¡ç†</h1><p><code>Vue.observable(object)</code>æ˜¯vue.js 2.6æ–°å¢åŠ çš„ä¸€ä¸ªapiï¼Œé€šè¿‡è¿™ä¸ªapiæˆ‘ä»¬å¯ä»¥åº”å¯¹ä¸€äº›ç®€å•çš„è·¨ç»„ä»¶æ•°æ®çŠ¶æ€å…±äº«çš„æƒ…å†µã€‚</p><p>æ¥çœ‹ä¸€ä¸‹å®é™…åº”ç”¨ï¼š</p><ul><li><p><strong>é¦–å…ˆå…ˆåˆ›å»ºä¸€ä¸ªstore.jsï¼ŒåŒ…å«ä¸€ä¸ªstore å’Œä¸€ä¸ª mutationsï¼Œåˆ†åˆ«ç”¨æ¥æŒ‡å‘æ•°æ®å’Œå¤„ç†æ–¹æ³•</strong></p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//store.js</span><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">let</span> store <span class="token operator">=</span>Vue<span class="token punctuation">.</span><span class="token function">observable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>name<span class="token punctuation">:</span><span class="token string">'æå››'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">let</span> mutations<span class="token operator">=</span><span class="token punctuation">{</span>    <span class="token function">setCount</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">{</span>        store<span class="token punctuation">.</span>count<span class="token operator">=</span>count<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">changeName</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">{</span>        store<span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p><strong>ç„¶ååœ¨ç»„ä»¶Home.vueä¸­å¼•ç”¨ï¼Œåœ¨ç»„ä»¶é‡Œä½¿ç”¨æ•°æ®å’Œæ–¹æ³•ï¼š</strong></p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">//Home.vue</span><span class="token operator">&lt;</span>template<span class="token operator">></span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>home<span class="token operator">-</span>header<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>home<span class="token operator">-</span>header<span class="token operator">></span>    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"setCount(count+1)"</span><span class="token operator">></span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"setCount(count-1)"</span><span class="token operator">></span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>storeä¸­countï¼š<span class="token punctuation">{</span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"changeName(name1)"</span><span class="token operator">></span>çˆ¶é¡µé¢ä¿®æ”¹name<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>storeä¸­nameï¼š<span class="token punctuation">{</span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/detail"</span> <span class="token operator">></span><span class="token operator">&lt;</span>h5<span class="token operator">></span>è·³è½¬åˆ°è¯¦æƒ…é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">></span>   <span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>  <span class="token operator">&lt;</span>script<span class="token operator">></span>  <span class="token keyword">import</span> HomeHeader <span class="token keyword">from</span> <span class="token string">'../components/HomeHeader'</span>   <span class="token keyword">import</span> <span class="token punctuation">{</span>store<span class="token punctuation">,</span>mutations<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>     data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">{</span>          name1<span class="token punctuation">:</span><span class="token string">'ä¸»é¡µçš„name'</span>       <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      components<span class="token punctuation">:</span> <span class="token punctuation">{</span>        HomeHeader     <span class="token punctuation">}</span><span class="token punctuation">,</span>      computed<span class="token punctuation">:</span><span class="token punctuation">{</span>          <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> store<span class="token punctuation">.</span>count          <span class="token punctuation">}</span><span class="token punctuation">,</span>          <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> store<span class="token punctuation">.</span>name          <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        methods<span class="token punctuation">:</span><span class="token punctuation">{</span>          setCount<span class="token punctuation">:</span>mutations<span class="token punctuation">.</span>setCount<span class="token punctuation">,</span>          changeName<span class="token punctuation">:</span>mutations<span class="token punctuation">.</span>changeName            <span class="token punctuation">}</span>      <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  </code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sleepå‡½æ•°</title>
      <link href="/2019/12/23/xie-yi-ge-sleep-zan-ting-han-shu/"/>
      <url>/2019/12/23/xie-yi-ge-sleep-zan-ting-han-shu/</url>
      
        <content type="html"><![CDATA[<h1 id="å†™ä¸€ä¸ªsleep-æš‚åœ-å‡½æ•°"><a href="#å†™ä¸€ä¸ªsleep-æš‚åœ-å‡½æ•°" class="headerlink" title="å†™ä¸€ä¸ªsleep(æš‚åœ)å‡½æ•°"></a>å†™ä¸€ä¸ªsleep(æš‚åœ)å‡½æ•°</h1><ul><li>ä¸è¦å†™åŒæ­¥çš„æš‚åœå‡½æ•°ã€‚å®ƒä¼šè®©ä½ çš„ç¨‹åºå¡æ­»ã€‚</li><li>å†™ä¸€ä¸ªå¼‚æ­¥çš„æš‚åœå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥åœ¨ä»»ä½• <code>async function</code> ä¸­æš‚åœï¼Œä¸”åªæš‚åœè¿™ä¸€éƒ¨åˆ†ä»£ç ã€‚</li></ul><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span>milliseconds<span class="token punctuation">:</span> number<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">></span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">></span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> milliseconds<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">void</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// â€¦ do something â€¦</span>    <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// â€¦ do something else â€¦</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> alg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactçš„åŸºæœ¬ä½¿ç”¨äºŒ</title>
      <link href="/2019/12/23/react-de-ji-ben-shi-yong-er/"/>
      <url>/2019/12/23/react-de-ji-ben-shi-yong-er/</url>
      
        <content type="html"><![CDATA[<h1 id="react-çš„åŸºæœ¬ä½¿ç”¨"><a href="#react-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="react çš„åŸºæœ¬ä½¿ç”¨"></a>react çš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="1-åŸºæœ¬æ„é€ "><a href="#1-åŸºæœ¬æ„é€ " class="headerlink" title="1. åŸºæœ¬æ„é€ "></a>1. åŸºæœ¬æ„é€ </h2><p>react æœ€åŸºæœ¬çš„æ„é€ å¦‚ä¸‹</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">></span>  <span class="token operator">&lt;</span>html<span class="token operator">></span>  <span class="token operator">&lt;</span>head<span class="token operator">></span>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../build/react.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../build/react-dom.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"../build/browser.min.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>  <span class="token operator">&lt;</span>body<span class="token operator">></span>    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"example"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/babel"</span><span class="token operator">></span>      ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">,</span>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre><p> æˆ‘ä»¬æ‰€å¼•è¿›æ¥çš„ä¸‰ä¸ªåº“ï¼Œå…¶ä¸­<code>react.js</code>æ˜¯Reactçš„æ ¸å¿ƒåº“ï¼Œ<code>react-dom.js</code>æ˜¯æä¾›ä¸DOM ç›¸å…³çš„åŠŸèƒ½ï¼Œ<code>browser.js</code>çš„ä½œç”¨æ˜¯å°†JSXè¯­æ³•è½¬ä¸ºJavaScriptè¯­æ³•ã€‚ å…¶ä¸­<code>text/babel</code>è¿™æ˜¯å› ä¸ºReactç‹¬æœ‰çš„JSXè¯­æ³•ï¼Œè·ŸJavaScriptä¸å…¼å®¹ã€‚</p><h2 id="2-JSXè¯­æ³•"><a href="#2-JSXè¯­æ³•" class="headerlink" title="2. JSXè¯­æ³•"></a>2. JSXè¯­æ³•</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">var</span> animals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cat'</span><span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">,</span> <span class="token string">'mouse'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>div<span class="token operator">></span>  <span class="token punctuation">{</span>    animals<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>animal<span class="token punctuation">}</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢è¿™è¡Œä¾‹å­ï¼Œæç°äº† JSXçš„åŸºæœ¬è§„åˆ™ï¼Œé‡åˆ°<code>&lt;</code>æ ‡ç­¾å¼€å¤´ï¼Œå°±å·²HTMLè§„åˆ™è§£æï¼Œé‡åˆ°<code>{</code>æ ‡ç­¾å¼€å¤´ï¼Œå°±ç”¨JavaScriptè§„åˆ™è§£æã€‚å¦‚æœå˜é‡æ˜¯ä¸€ä¸ªæ•°æ®ï¼ŒJSXä¼šé»˜è®¤å°†æ‰€æœ‰æ•°æ®æˆå‘˜å±•å¼€ã€‚</p><h2 id="3-ç»„ä»¶"><a href="#3-ç»„ä»¶" class="headerlink" title="3. ç»„ä»¶"></a>3. ç»„ä»¶</h2><p>Reactå¯ä»¥å°†ä»£ç å°è£…æˆç»„ä»¶ï¼Œç„¶ååƒæ’å…¥HTMLæ ‡ç­¾ä¸€æ ·ï¼Œåœ¨ç½‘é¡µä¸­æ’å…¥è¿™ä¸ªç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">NotesList</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>ol<span class="token operator">></span>      <span class="token punctuation">{</span>        React<span class="token punctuation">.</span>Children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>child<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span>child<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>NotesList name<span class="token operator">=</span><span class="token string">'john'</span><span class="token operator">></span>  <span class="token operator">&lt;</span>span<span class="token operator">></span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>  <span class="token operator">&lt;</span>span<span class="token operator">></span>world<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>NotesList<span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'example'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>æ³¨æ„</strong>ï¼šç»„ä»¶ç±»åå¿…é¡»å¤§å†™ï¼Œç»„ä»¶ç±»åªèƒ½åŒ…å«ä¸€ä¸ªé¡¶å±‚æ ‡ç­¾ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œæ‰€æœ‰çš„ç»„ä»¶ç±»å¿…é¡»æœ‰è‡ªå·±çš„renderæ–¹æ³•ï¼Œç”¨äºè¾“å‡ºç»„ä»¶ã€‚</p><p>ç»„ä»¶æ ‡ç­¾å’ŒHTMLæ ‡ç­¾ä¸€è‡´ï¼Œå¯ä»¥æ·»åŠ å±æ€§ï¼Œæ¯”å¦‚<code>NotesList</code>ç»„ä»¶æ·»åŠ äº†ä¸€ä¸ª<code>name</code>å±æ€§ã€‚è¯¥å±æ€§å¯ä»¥åœ¨å±æ€§ç±»ä¸Šé€šè¿‡<code>this.props</code>å¯¹è±¡ä¸Šè·å–,æ¯”å¦‚<code>name</code>é€šè¿‡<code>this.props.name</code>è·å–ã€‚</p><p><code>this.props.children</code>å±æ€§è¡¨ç¤ºç»„ä»¶æ‰€æœ‰çš„å­èŠ‚ç‚¹ï¼Œæ¯”å¦‚ä¸Šæ–¹<code>NotesList</code>ç»„ä»¶æœ‰ä¸¤ä¸ªspanå­èŠ‚ç‚¹ï¼Œä»–ä»¬å¯ä»¥åœ¨ç»„ä»¶ç±»ä¸­é€šè¿‡<code>this.props. children</code>è·å–ã€‚</p><p><strong>æ³¨æ„</strong><code>this.props.children</code>çš„å€¼æœ‰ä¸‰ç§å¯èƒ½ï¼Œ</p>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reactçš„åŸºæœ¬ä½¿ç”¨ä¸€</title>
      <link href="/2019/12/23/react-de-ji-ben-shi-yong-yi/"/>
      <url>/2019/12/23/react-de-ji-ben-shi-yong-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="react-çš„åŸºæœ¬ä½¿ç”¨"><a href="#react-çš„åŸºæœ¬ä½¿ç”¨" class="headerlink" title="react çš„åŸºæœ¬ä½¿ç”¨"></a>react çš„åŸºæœ¬ä½¿ç”¨</h1><h2 id="1-jsxè¯­æ³•"><a href="#1-jsxè¯­æ³•" class="headerlink" title="1. jsxè¯­æ³•"></a>1. jsxè¯­æ³•</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span></code></pre><p>è¿™ç§è¯­æ³•æ—¢ä¸æ˜¯å­—ç¬¦ä¸²ä¹Ÿä¸æ˜¯htmlï¼Œä»–è¢«ç§°ä¸ºjsx</p><h2 id="2-å…ƒç´ çš„æ¸²æŸ“"><a href="#2-å…ƒç´ çš„æ¸²æŸ“" class="headerlink" title="2. å…ƒç´ çš„æ¸²æŸ“"></a>2. å…ƒç´ çš„æ¸²æŸ“</h2><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="3-ç»„ä»¶å’Œprops"><a href="#3-ç»„ä»¶å’Œprops" class="headerlink" title="3. ç»„ä»¶å’Œprops"></a>3. ç»„ä»¶å’Œprops</h2><ul><li><p><strong>å‡½æ•°ç»„ä»¶</strong></p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre></li><li><p><strong>ES6ä¸­çš„classç»„ä»¶</strong></p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p><strong>æ¸²æŸ“ç»„ä»¶</strong></p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">"Sara"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  element<span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è‡ªå®šä¹‰ç»„ä»¶çš„å±æ€§ï¼Œä»–ä¼šå°†jsxæ‰€æ¥æ”¶çš„å±æ€§è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º<code>props1</code></p></li></ul><h2 id="4-state-amp-ç”Ÿå‘½å‘¨æœŸ"><a href="#4-state-amp-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="4. state &amp; ç”Ÿå‘½å‘¨æœŸ"></a>4. state &amp; ç”Ÿå‘½å‘¨æœŸ</h2><p>  å°è£…æ—¶é’Ÿ</p><pre class=" language-js"><code class="language-js">  <span class="token keyword">function</span> <span class="token function">Clock</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>        <span class="token operator">&lt;</span>h2<span class="token operator">></span>It is <span class="token punctuation">{</span>props<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">function</span> <span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>      <span class="token operator">&lt;</span>Clock date<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">setInterval</span><span class="token punctuation">(</span>tick<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>  è™½ç„¶è¿™æ ·ä¹Ÿèƒ½å®ç°è®¡æ—¶å™¨çš„åŠŸèƒ½ï¼Œä½†æ˜¯ä»–å¿½ç•¥äº†ä¸€ä¸ªå…³é”®çš„æŠ€æœ¯ç»†èŠ‚ï¼šclockç»„ä»¶éœ€è¦è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨ï¼Œå¹¶ä¸”éœ€è¦æ¯ç§’æ›´æ–°UIï¼Œ åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åªç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œä¾¿å¯ä»¥è®©clockç»„ä»¶è‡ªæˆ‘æ›´æ–°ã€‚</p><p>  æˆ‘ä»¬éœ€è¦åœ¨ <code>Clock</code> ç»„ä»¶ä¸­æ·»åŠ  â€œstateâ€ æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚</p><p>  State ä¸ props ç±»ä¼¼ï¼Œä½†æ˜¯ state æ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”å®Œå…¨å—æ§äºå½“å‰ç»„ä»¶ã€‚</p><ul><li><p><strong>å°†å‡½æ•°ç»„ä»¶è½¬æ¢æˆclassç»„ä»¶</strong></p><p>  é€šè¿‡ä»¥ä¸‹äº”æ­¥å°† <code>Clock</code> çš„å‡½æ•°ç»„ä»¶è½¬æˆ class ç»„ä»¶ï¼š</p><ul><li>åˆ›å»ºä¸€ä¸ªåŒåçš„ <code>ES6 class</code>ï¼Œå¹¶ä¸”ç»§æ‰¿äº <code>React.Component</code>ã€‚</li><li>æ·»åŠ ä¸€ä¸ªç©ºçš„ <code>render()</code> æ–¹æ³•</li><li>å°†å‡½æ•°ä½“ç§»åŠ¨åˆ° <code>render()</code> æ–¹æ³•ä¹‹ä¸­ã€‚</li><li>åœ¨ <code>render()</code> æ–¹æ³•ä¸­ä½¿ç”¨ <code>this.props</code> æ›¿æ¢ <code>props</code>ã€‚</li><li>åˆ é™¤å‰©ä½™çš„ç©ºå‡½æ•°å£°æ˜ã€‚</li></ul><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>h2<span class="token operator">></span>It is <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p><strong>å‘ class ç»„ä»¶ä¸­æ·»åŠ å±€éƒ¨çš„ state</strong></p><p>æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹ä¸‰æ­¥å°† <code>date</code> ä» props ç§»åŠ¨åˆ° state ä¸­ï¼š</p><ul><li><p>æŠŠ <code>render()</code> æ–¹æ³•ä¸­çš„ <code>this.props.date</code> æ›¿æ¢æˆ <code>this.state.date</code></p></li><li><p>æ·»åŠ ä¸€ä¸ª <code>class æ„é€ å‡½æ•°</code>ï¼Œç„¶ååœ¨è¯¥å‡½æ•°ä¸­ä¸º <code>this.state</code> èµ‹åˆå€¼ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>        <span class="token operator">&lt;</span>h2<span class="token operator">></span>It is <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre></li><li><p>ç§»é™¤ <code>&lt;Clock /&gt;</code>å…ƒç´ ä¸­çš„ <code>date</code> å±æ€§:</p><pre class=" language-js"><code class="language-js">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Clock <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li></ul></li><li><p><strong>å°†ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ·»åŠ åˆ° Class ä¸­</strong></p><p>åœ¨å…·æœ‰è®¸å¤šç»„ä»¶çš„åº”ç”¨ç¨‹åºä¸­ï¼Œå½“ç»„ä»¶è¢«é”€æ¯æ—¶é‡Šæ”¾æ‰€å ç”¨çš„èµ„æºæ˜¯éå¸¸é‡è¦çš„ã€‚</p><p>å½“ <code>Clock</code> ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“åˆ° DOM ä¸­çš„æ—¶å€™ï¼Œå°±ä¸ºå…¶<code>è®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨</code>ã€‚è¿™åœ¨ React ä¸­è¢«ç§°ä¸ºâ€œæŒ‚è½½ï¼ˆmountï¼‰â€ã€‚</p><p>åŒæ—¶ï¼Œå½“ DOM ä¸­ <code>Clock</code> ç»„ä»¶è¢«åˆ é™¤çš„æ—¶å€™ï¼Œåº”è¯¥<code>æ¸…é™¤è®¡æ—¶å™¨</code>ã€‚è¿™åœ¨ React ä¸­è¢«ç§°ä¸ºâ€œå¸è½½ï¼ˆumountï¼‰â€ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ä¸º class ç»„ä»¶å£°æ˜ä¸€äº›ç‰¹æ®Šçš„æ–¹æ³•ï¼Œå½“ç»„ä»¶æŒ‚è½½æˆ–å¸è½½æ—¶å°±ä¼šå»æ‰§è¡Œè¿™äº›æ–¹æ³•ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Clock</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>timerID <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token number">1000</span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">clearInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>timerID<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">tick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>    <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>    <span class="token operator">&lt;</span>h2<span class="token operator">></span>It is <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Clock <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>æ³¨æ„</strong>:</p><ul><li><p>ä¸è¦ç›´æ¥ä¿®æ”¹state</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Wrong</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>comment <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Correct</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>comment<span class="token punctuation">:</span> <span class="token string">'Hello'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>stateçš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„</p><p>å‡ºäºæ€§èƒ½è€ƒè™‘ï¼ŒReact å¯èƒ½ä¼šæŠŠå¤šä¸ª <code>setState()</code> è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨ã€‚</p><p>å› ä¸º <code>this.props</code> å’Œ <code>this.state</code> å¯èƒ½ä¼šå¼‚æ­¥æ›´æ–°ï¼Œæ‰€ä»¥ä½ ä¸è¦ä¾èµ–ä»–ä»¬çš„å€¼æ¥æ›´æ–°ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚</p><p>ä¾‹å¦‚ï¼Œæ­¤ä»£ç å¯èƒ½ä¼šæ— æ³•æ›´æ–°è®¡æ•°å™¨ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Wrong</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  counter<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>increment<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è®© <code>setState()</code> æ¥æ”¶ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸ªå‡½æ•°ç”¨ä¸Šä¸€ä¸ª state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå°†æ­¤æ¬¡æ›´æ–°è¢«åº”ç”¨æ—¶çš„ props åšä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// Correct</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>  counter<span class="token punctuation">:</span> state<span class="token punctuation">.</span>counter <span class="token operator">+</span> props<span class="token punctuation">.</span>increment<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p>stateçš„æ›´æ–°ä¼šè¢«åˆå¹¶</p><pre class=" language-js"><code class="language-js"><span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>    posts<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    comments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">fetchPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      posts<span class="token punctuation">:</span> response<span class="token punctuation">.</span>posts    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">fetchComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      comments<span class="token punctuation">:</span> response<span class="token punctuation">.</span>comments    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™é‡Œçš„åˆå¹¶æ˜¯æµ…åˆå¹¶ï¼Œæ‰€ä»¥ <code>this.setState({comments})</code> å®Œæ•´ä¿ç•™äº† <code>this.state.posts</code>ï¼Œ ä½†æ˜¯å®Œå…¨æ›¿æ¢äº† <code>this.state.comments</code>ã€‚</p></li></ul></li><li><p><strong>æ•°æ®æ˜¯å‘ä¸‹æµåŠ¨çš„</strong></p><p>ä¸ç®¡æ˜¯çˆ¶ç»„ä»¶æˆ–æ˜¯å­ç»„ä»¶éƒ½æ— æ³•çŸ¥é“æŸä¸ªç»„ä»¶æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿå¹¶ä¸å…³å¿ƒå®ƒæ˜¯å‡½æ•°ç»„ä»¶è¿˜æ˜¯ class ç»„ä»¶ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§° state ä¸ºå±€éƒ¨çš„æˆ–æ˜¯å°è£…çš„çš„åŸå› ã€‚é™¤äº†æ‹¥æœ‰å¹¶è®¾ç½®äº†å®ƒçš„ç»„ä»¶ï¼Œå…¶ä»–ç»„ä»¶éƒ½æ— æ³•è®¿é—®ã€‚</p><p>ç»„ä»¶å¯ä»¥é€‰æ‹©æŠŠå®ƒçš„ state ä½œä¸º props å‘ä¸‹ä¼ é€’åˆ°å®ƒçš„å­ç»„ä»¶ä¸­ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>FormattedDate date<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>date<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span></code></pre><p><code>FormattedDate</code> ç»„ä»¶ä¼šåœ¨å…¶ props ä¸­æ¥æ”¶å‚æ•° <code>date</code>ï¼Œä½†æ˜¯ç»„ä»¶æœ¬èº«æ— æ³•çŸ¥é“å®ƒæ˜¯æ¥è‡ªäº <code>Clock</code> çš„ stateï¼Œæˆ–æ˜¯ <code>Clock</code> çš„ propsï¼Œè¿˜æ˜¯æ‰‹åŠ¨è¾“å…¥çš„ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">FormattedDate</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h2<span class="token operator">></span>It is <span class="token punctuation">{</span>props<span class="token punctuation">.</span>date<span class="token punctuation">.</span><span class="token function">toLocaleTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™é€šå¸¸ä¼šè¢«å«åšâ€œè‡ªä¸Šè€Œä¸‹â€æˆ–æ˜¯â€œå•å‘â€çš„æ•°æ®æµã€‚ä»»ä½•çš„ state æ€»æ˜¯æ‰€å±äºç‰¹å®šçš„ç»„ä»¶ï¼Œè€Œä¸”ä»è¯¥ state æ´¾ç”Ÿçš„ä»»ä½•æ•°æ®æˆ– UI åªèƒ½å½±å“æ ‘ä¸­â€œä½äºâ€å®ƒä»¬çš„ç»„ä»¶ã€‚</p><p>å¦‚æœä½ æŠŠä¸€ä¸ªä»¥ç»„ä»¶æ„æˆçš„æ ‘æƒ³è±¡æˆä¸€ä¸ª props çš„æ•°æ®ç€‘å¸ƒçš„è¯ï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªç»„ä»¶çš„ state å°±åƒæ˜¯åœ¨ä»»æ„ä¸€ç‚¹ä¸Šç»™ç€‘å¸ƒå¢åŠ é¢å¤–çš„æ°´æºï¼Œä½†æ˜¯å®ƒåªèƒ½å‘ä¸‹æµåŠ¨ã€‚</p></li></ul><h2 id="5-äº‹ä»¶å¤„ç†"><a href="#5-äº‹ä»¶å¤„ç†" class="headerlink" title="5. äº‹ä»¶å¤„ç†"></a>5. äº‹ä»¶å¤„ç†</h2><p>React å…ƒç´ çš„äº‹ä»¶å¤„ç†å’Œ DOM å…ƒç´ çš„å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹è¯­æ³•ä¸Šçš„ä¸åŒ:</p><ul><li>React äº‹ä»¶çš„å‘½åé‡‡ç”¨å°é©¼å³°å¼ï¼ˆcamelCaseï¼‰ï¼Œè€Œä¸æ˜¯çº¯å°å†™ã€‚</li><li>ä½¿ç”¨ JSX è¯­æ³•æ—¶ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œä¼ ç»Ÿçš„ HTMLï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>activateLasers()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  Activate Lasers<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><p>åœ¨ React ä¸­ç•¥å¾®ä¸åŒï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation">=</span>{activateLasers}</span><span class="token punctuation">></span></span>  Activate Lasers<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span></code></pre><p>åœ¨ React ä¸­å¦ä¸€ä¸ªä¸åŒç‚¹æ˜¯ä½ ä¸èƒ½é€šè¿‡è¿”å› <code>false</code> çš„æ–¹å¼é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚ä½ å¿…é¡»æ˜¾å¼çš„ä½¿ç”¨ <code>preventDefault</code> ã€‚ä¾‹å¦‚ï¼Œä¼ ç»Ÿçš„ HTML ä¸­é˜»æ­¢é“¾æ¥é»˜è®¤æ‰“å¼€ä¸€ä¸ªæ–°é¡µé¢ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š</p><pre><code>&lt;a href=&quot;#&quot; onclick=&quot;console.log(&#39;The link was clicked.&#39;); return false&quot;&gt;  Click me&lt;/a&gt;</code></pre><p>åœ¨ React ä¸­ï¼Œå¯èƒ½æ˜¯è¿™æ ·çš„ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">ActionLink</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The link was clicked.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"#"</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>      Click me    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å½“ä½ ä½¿ç”¨ <code>ES6 class</code> è¯­æ³•å®šä¹‰ä¸€ä¸ªç»„ä»¶çš„æ—¶å€™ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°†äº‹ä»¶å¤„ç†å‡½æ•°å£°æ˜ä¸º class ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ <code>Toggle</code> ç»„ä»¶ä¼šæ¸²æŸ“ä¸€ä¸ªè®©ç”¨æˆ·åˆ‡æ¢å¼€å…³çŠ¶æ€çš„æŒ‰é’®ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Toggle</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>isToggleOn<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ä¸ºäº†åœ¨å›è°ƒä¸­ä½¿ç”¨ `this`ï¼Œè¿™ä¸ªç»‘å®šæ˜¯å¿…ä¸å¯å°‘çš„</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>      isToggleOn<span class="token punctuation">:</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>isToggleOn    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isToggleOn <span class="token operator">?</span> <span class="token string">'ON'</span> <span class="token punctuation">:</span> <span class="token string">'OFF'</span><span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Toggle <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä½ å¿…é¡»è°¨æ…å¯¹å¾… JSX å›è°ƒå‡½æ•°ä¸­çš„ <code>this</code>ï¼Œåœ¨ JavaScript ä¸­ï¼Œclass çš„æ–¹æ³•é»˜è®¤ä¸ä¼š<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_objects/Function/bind" target="_blank" rel="noopener">ç»‘å®š</a> <code>this</code>ã€‚å¦‚æœä½ å¿˜è®°ç»‘å®š <code>this.handleClick</code> å¹¶æŠŠå®ƒä¼ å…¥äº† <code>onClick</code>ï¼Œå½“ä½ è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ <code>this</code> çš„å€¼ä¸º <code>undefined</code>ã€‚</p><p>è¿™å¹¶ä¸æ˜¯ React ç‰¹æœ‰çš„è¡Œä¸ºï¼›è¿™å…¶å®ä¸ <a href="https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/" target="_blank" rel="noopener">JavaScript å‡½æ•°å·¥ä½œåŸç†</a>æœ‰å…³ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨æ–¹æ³•åé¢æ·»åŠ  <code>()</code>ï¼Œä¾‹å¦‚ <code>onClick={this.handleClick}</code>ï¼Œä½ åº”è¯¥ä¸ºè¿™ä¸ªæ–¹æ³•ç»‘å®š <code>this</code>ã€‚</p><p>å¦‚æœè§‰å¾—ä½¿ç”¨ <code>bind</code> å¾ˆéº»çƒ¦ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥è§£å†³ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨å®éªŒæ€§çš„ <a href="https://babeljs.io/docs/plugins/transform-class-properties/" target="_blank" rel="noopener">public class fields è¯­æ³•</a>ï¼Œä½ å¯ä»¥ä½¿ç”¨ class fields æ­£ç¡®çš„ç»‘å®šå›è°ƒå‡½æ•°ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LoggingButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// æ­¤è¯­æ³•ç¡®ä¿ `handleClick` å†…çš„ `this` å·²è¢«ç»‘å®šã€‚</span>  <span class="token comment" spellcheck="true">// æ³¨æ„: è¿™æ˜¯ *å®éªŒæ€§* è¯­æ³•ã€‚</span>  handleClick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">></span>        Click me      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><a href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="noopener">Create React App</a> é»˜è®¤å¯ç”¨æ­¤è¯­æ³•ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ class fields è¯­æ³•ï¼Œä½ å¯ä»¥åœ¨å›è°ƒä¸­ä½¿ç”¨<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions" target="_blank" rel="noopener">ç®­å¤´å‡½æ•°</a>ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LoggingButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// æ­¤è¯­æ³•ç¡®ä¿ `handleClick` å†…çš„ `this` å·²è¢«ç»‘å®šã€‚</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>        Click me      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>æ­¤è¯­æ³•é—®é¢˜åœ¨äºæ¯æ¬¡æ¸²æŸ“ <code>LoggingButton</code> æ—¶éƒ½ä¼šåˆ›å»ºä¸åŒçš„å›è°ƒå‡½æ•°ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†å¦‚æœè¯¥å›è°ƒå‡½æ•°ä½œä¸º prop ä¼ å…¥å­ç»„ä»¶æ—¶ï¼Œè¿™äº›ç»„ä»¶å¯èƒ½ä¼šè¿›è¡Œé¢å¤–çš„é‡æ–°æ¸²æŸ“ã€‚æˆ‘ä»¬é€šå¸¸å»ºè®®åœ¨æ„é€ å™¨ä¸­ç»‘å®šæˆ–ä½¿ç”¨ class fields è¯­æ³•æ¥é¿å…è¿™ç±»æ€§èƒ½é—®é¢˜ã€‚</p><h2 id="6-æ¡ä»¶æ¸²æŸ“"><a href="#6-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="6. æ¡ä»¶æ¸²æŸ“"></a>6. æ¡ä»¶æ¸²æŸ“</h2><p>è§‚å¯Ÿä¸‹é¢ä¸¤ä¸ªç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">UserGreeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Welcome back<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">GuestGreeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Please sign up<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>å†åˆ›å»ºä¸€ä¸ª <code>Greeting</code> ç»„ä»¶ï¼Œå®ƒä¼šæ ¹æ®ç”¨æˆ·æ˜¯å¦ç™»å½•æ¥å†³å®šæ˜¾ç¤ºä¸Šé¢çš„å“ªä¸€ä¸ªç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Greeting</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> props<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>UserGreeting <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>GuestGreeting <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token comment" spellcheck="true">// Try changing to isLoggedIn={true}:</span>  <span class="token operator">&lt;</span>Greeting isLoggedIn<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>å…ƒç´ å˜é‡</strong></p><p>ä½ å¯ä»¥ä½¿ç”¨å˜é‡æ¥å‚¨å­˜å…ƒç´ ã€‚ å®ƒå¯ä»¥å¸®åŠ©ä½ æœ‰æ¡ä»¶åœ°æ¸²æŸ“ç»„ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå…¶ä»–çš„æ¸²æŸ“éƒ¨åˆ†å¹¶ä¸ä¼šå› æ­¤è€Œæ”¹å˜ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">LoginButton</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span><span class="token operator">></span>      Login    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">LogoutButton</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>onClick<span class="token punctuation">}</span><span class="token operator">></span>      Logout    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªåå« <code>LoginControl</code> çš„<a href="https://react.docschina.org/docs/state-and-lifecycle.html#adding-local-state-to-a-class" target="_blank" rel="noopener">æœ‰çŠ¶æ€çš„ç»„ä»¶</a>ã€‚</p><p>å®ƒå°†æ ¹æ®å½“å‰çš„çŠ¶æ€æ¥æ¸²æŸ“ <code>æˆ–è€…</code>ã€‚åŒæ—¶å®ƒè¿˜ä¼šæ¸²æŸ“ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„ ``ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">LoginControl</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleLoginClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleLoginClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleLogoutClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleLogoutClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>isLoggedIn<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleLoginClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>isLoggedIn<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleLogoutClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>isLoggedIn<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>    <span class="token keyword">let</span> button<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isLoggedIn<span class="token punctuation">)</span> <span class="token punctuation">{</span>      button <span class="token operator">=</span> <span class="token operator">&lt;</span>LogoutButton onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLogoutClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      button <span class="token operator">=</span> <span class="token operator">&lt;</span>LoginButton onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLoginClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>Greeting isLoggedIn<span class="token operator">=</span><span class="token punctuation">{</span>isLoggedIn<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token punctuation">{</span>button<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>LoginControl <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>ä¸è¿ç®—ç¬¦ &amp;&amp;</strong></p><p>é€šè¿‡èŠ±æ‹¬å·åŒ…è£¹ä»£ç ï¼Œä½ å¯ä»¥<a href="https://react.docschina.org/docs/introducing-jsx.html#embedding-expressions-in-jsx" target="_blank" rel="noopener">åœ¨ JSX ä¸­åµŒå…¥ä»»ä½•è¡¨è¾¾å¼</a>ã€‚è¿™ä¹ŸåŒ…æ‹¬ JavaScript ä¸­çš„é€»è¾‘ä¸ (&amp;&amp;) è¿ç®—ç¬¦ã€‚å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è¿›è¡Œå…ƒç´ çš„æ¡ä»¶æ¸²æŸ“ã€‚    </p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Mailbox</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> unreadMessages <span class="token operator">=</span> props<span class="token punctuation">.</span>unreadMessages<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token punctuation">{</span>unreadMessages<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>        <span class="token operator">&lt;</span>h2<span class="token operator">></span>          You have <span class="token punctuation">{</span>unreadMessages<span class="token punctuation">.</span>length<span class="token punctuation">}</span> unread messages<span class="token punctuation">.</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">></span>      <span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> messages <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'React'</span><span class="token punctuation">,</span> <span class="token string">'Re: React'</span><span class="token punctuation">,</span> <span class="token string">'Re:Re: React'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Mailbox unreadMessages<span class="token operator">=</span><span class="token punctuation">{</span>messages<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>ä¸‰ç›®è¿ç®—ç¬¦</strong></p><pre class=" language-js"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      The user is <span class="token operator">&lt;</span>b<span class="token operator">></span><span class="token punctuation">{</span>isLoggedIn <span class="token operator">?</span> <span class="token string">'currently'</span> <span class="token punctuation">:</span> <span class="token string">'not'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">></span> logged <span class="token keyword">in</span><span class="token punctuation">.</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> isLoggedIn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLoggedIn<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div<span class="token operator">></span>      <span class="token punctuation">{</span>isLoggedIn <span class="token operator">?</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>LogoutButton onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLogoutClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>        <span class="token operator">&lt;</span>LoginButton onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleLoginClick<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>é˜»æ­¢ç»„ä»¶æ¸²æŸ“</strong></p><p>åœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›èƒ½éšè—ç»„ä»¶ï¼Œå³ä½¿å®ƒå·²ç»è¢«å…¶ä»–ç»„ä»¶æ¸²æŸ“ã€‚è‹¥è¦å®Œæˆæ­¤æ“ä½œï¼Œä½ å¯ä»¥è®© <code>render</code> æ–¹æ³•ç›´æ¥è¿”å› <code>null</code>ï¼Œè€Œä¸è¿›è¡Œä»»ä½•æ¸²æŸ“ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œ`` ä¼šæ ¹æ® prop ä¸­ <code>warn</code> çš„å€¼æ¥è¿›è¡Œæ¡ä»¶æ¸²æŸ“ã€‚å¦‚æœ <code>warn</code> çš„å€¼æ˜¯ <code>false</code>ï¼Œé‚£ä¹ˆç»„ä»¶åˆ™ä¸ä¼šæ¸²æŸ“:</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">WarningBanner</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token punctuation">.</span>warn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"warning"</span><span class="token operator">></span>      Warning<span class="token operator">!</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Page</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>showWarning<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggleClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleToggleClick<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleToggleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>state <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>      showWarning<span class="token punctuation">:</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>showWarning    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>WarningBanner warn<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showWarning<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleToggleClick<span class="token punctuation">}</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showWarning <span class="token operator">?</span> <span class="token string">'Hide'</span> <span class="token punctuation">:</span> <span class="token string">'Show'</span><span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>Page <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="7-åˆ—è¡¨-amp-key"><a href="#7-åˆ—è¡¨-amp-key" class="headerlink" title="7. åˆ—è¡¨&amp;key"></a>7. åˆ—è¡¨&amp;key</h2><p><strong>æ¸²æŸ“å¤šä¸ªç»„ä»¶</strong></p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ Javascript ä¸­çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="noopener"><code>map()</code></a> æ–¹æ³•æ¥éå† <code>numbers</code> æ•°ç»„ã€‚å°†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å˜æˆ<code>&lt;li&gt;</code> æ ‡ç­¾ï¼Œæœ€åæˆ‘ä»¬å°†å¾—åˆ°çš„æ•°ç»„èµ‹å€¼ç»™ <code>listItems</code>ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">const</span> listItems <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span>number<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>æˆ‘ä»¬æŠŠæ•´ä¸ª <code>listItems</code> æ’å…¥åˆ° `` å…ƒç´ ä¸­ï¼Œç„¶å<a href="https://react.docschina.org/docs/rendering-elements.html#rendering-an-element-into-the-dom" target="_blank" rel="noopener">æ¸²æŸ“è¿› DOM</a>ï¼š</p><pre class=" language-js"><code class="language-js">ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>ul<span class="token operator">></span><span class="token punctuation">{</span>listItems<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>ç”¨ key æå–ç»„ä»¶</strong></p><p>å¦‚æœä½ æå– å‡ºä¸€ä¸ª <code>ListItem</code> ç»„ä»¶ï¼Œä½ åº”è¯¥æŠŠ key ä¿ç•™åœ¨æ•°ç»„ä¸­çš„è¿™ä¸ª <code>å…ƒç´ ä¸Šï¼Œè€Œä¸æ˜¯æ”¾åœ¨ `ListItem` ç»„ä»¶ä¸­çš„</code> å…ƒç´ ä¸Šã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">ListItem</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// æ­£ç¡®ï¼è¿™é‡Œä¸éœ€è¦æŒ‡å®š keyï¼š</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">NumberList</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> numbers <span class="token operator">=</span> props<span class="token punctuation">.</span>numbers<span class="token punctuation">;</span>  <span class="token keyword">const</span> listItems <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>    <span class="token comment" spellcheck="true">// æ­£ç¡®ï¼key åº”è¯¥åœ¨æ•°ç»„çš„ä¸Šä¸‹æ–‡ä¸­è¢«æŒ‡å®š</span>    <span class="token operator">&lt;</span>ListItem key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>              value<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token punctuation">{</span>listItems<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> numbers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>NumberList numbers<span class="token operator">=</span><span class="token punctuation">{</span>numbers<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>key ä¼šä¼ é€’ä¿¡æ¯ç»™ React ï¼Œä½†ä¸ä¼šä¼ é€’ç»™ä½ çš„ç»„ä»¶ã€‚å¦‚æœä½ çš„ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨ <code>key</code> å±æ€§çš„å€¼ï¼Œè¯·ç”¨å…¶ä»–å±æ€§åæ˜¾å¼ä¼ é€’è¿™ä¸ªå€¼ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> content <span class="token operator">=</span> posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>  <span class="token operator">&lt;</span>Post    key<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>id<span class="token punctuation">}</span>    id<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>id<span class="token punctuation">}</span>    title<span class="token operator">=</span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>title<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢ä¾‹å­ä¸­ï¼Œ<code>Post</code> ç»„ä»¶å¯ä»¥è¯»å‡º <code>props.id</code>ï¼Œä½†æ˜¯ä¸èƒ½è¯»å‡º <code>props.key</code>ã€‚</p><p><strong>åœ¨ JSX ä¸­åµŒå…¥ map()</strong></p><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªå•ç‹¬çš„ <code>listItems</code> å˜é‡å¹¶å°†å…¶åŒ…å«åœ¨ JSX ä¸­ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">NumberList</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> numbers <span class="token operator">=</span> props<span class="token punctuation">.</span>numbers<span class="token punctuation">;</span>  <span class="token keyword">const</span> listItems <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>    <span class="token operator">&lt;</span>ListItem key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>              value<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token punctuation">{</span>listItems<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>JSX å…è®¸åœ¨å¤§æ‹¬å·ä¸­<a href="https://react.docschina.org/docs/introducing-jsx.html#embedding-expressions-in-jsx" target="_blank" rel="noopener">åµŒå…¥ä»»ä½•è¡¨è¾¾å¼</a>ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†…è” <code>map()</code> è¿”å›çš„ç»“æœï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">NumberList</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> numbers <span class="token operator">=</span> props<span class="token punctuation">.</span>numbers<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>ul<span class="token operator">></span>      <span class="token punctuation">{</span>numbers<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>        <span class="token operator">&lt;</span>ListItem key<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>                  value<span class="token operator">=</span><span class="token punctuation">{</span>number<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="8-è¡¨å•"><a href="#8-è¡¨å•" class="headerlink" title="8. è¡¨å•"></a>8. è¡¨å•</h2><p><strong>inputæ ‡ç­¾</strong></p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">NameForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æäº¤çš„åå­—: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token operator">&lt;</span>label<span class="token operator">></span>          åå­—<span class="token punctuation">:</span>          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"æäº¤"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>textareaæ ‡ç­¾</strong></p><p>åœ¨ HTML ä¸­, `` å…ƒç´ é€šè¿‡å…¶å­å…ƒç´ å®šä¹‰å…¶æ–‡æœ¬:</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>textarea<span class="token operator">></span>  ä½ å¥½ï¼Œ è¿™æ˜¯åœ¨ text area é‡Œçš„æ–‡æœ¬<span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">></span></code></pre><p>è€Œåœ¨ React ä¸­ï¼Œ<code>ä½¿ç”¨ `value` å±æ€§ä»£æ›¿ã€‚è¿™æ ·ï¼Œå¯ä»¥ä½¿å¾—ä½¿ç”¨</code> çš„è¡¨å•å’Œä½¿ç”¨å•è¡Œ input çš„è¡¨å•éå¸¸ç±»ä¼¼ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">EssayForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      value<span class="token punctuation">:</span> <span class="token string">'è¯·æ’°å†™ä¸€ç¯‡å…³äºä½ å–œæ¬¢çš„ DOM å…ƒç´ çš„æ–‡ç« .'</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æäº¤çš„æ–‡ç« : '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token operator">&lt;</span>label<span class="token operator">></span>          æ–‡ç« <span class="token punctuation">:</span>          <span class="token operator">&lt;</span>textarea value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"æäº¤"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è¯·æ³¨æ„ï¼Œ<code>this.state.value</code> åˆå§‹åŒ–äºæ„é€ å‡½æ•°ä¸­ï¼Œå› æ­¤æ–‡æœ¬åŒºåŸŸé»˜è®¤æœ‰åˆå€¼ã€‚</p><p><strong>selectæ ‡ç­¾</strong></p><p>åœ¨ HTML ä¸­ï¼Œ`` åˆ›å»ºä¸‹æ‹‰åˆ—è¡¨æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œå¦‚ä¸‹ HTML åˆ›å»ºäº†æ°´æœç›¸å…³çš„ä¸‹æ‹‰åˆ—è¡¨ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>select<span class="token operator">></span>  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"grapefruit"</span><span class="token operator">></span>è‘¡è„æŸš<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"lime"</span><span class="token operator">></span>æŸ æª¬<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>  <span class="token operator">&lt;</span>option selected value<span class="token operator">=</span><span class="token string">"coconut"</span><span class="token operator">></span>æ¤°å­<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>  <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"mango"</span><span class="token operator">></span>èŠ’æœ<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span></code></pre><p>è¯·æ³¨æ„ï¼Œç”±äº <code>selected</code> å±æ€§çš„ç¼˜æ•…ï¼Œæ¤°å­é€‰é¡¹é»˜è®¤è¢«é€‰ä¸­ã€‚React å¹¶ä¸ä¼šä½¿ç”¨ <code>selected</code> å±æ€§ï¼Œè€Œæ˜¯åœ¨æ ¹ <code>select</code> æ ‡ç­¾ä¸Šä½¿ç”¨ <code>value</code> å±æ€§ã€‚è¿™åœ¨å—æ§ç»„ä»¶ä¸­æ›´ä¾¿æ·ï¼Œå› ä¸ºæ‚¨åªéœ€è¦åœ¨æ ¹æ ‡ç­¾ä¸­æ›´æ–°å®ƒã€‚ä¾‹å¦‚ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">FlavorForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>value<span class="token punctuation">:</span> <span class="token string">'coconut'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>value<span class="token punctuation">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleSubmit</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'ä½ å–œæ¬¢çš„é£å‘³æ˜¯: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">></span>        <span class="token operator">&lt;</span>label<span class="token operator">></span>          é€‰æ‹©ä½ å–œæ¬¢çš„é£å‘³<span class="token punctuation">:</span>          <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span><span class="token operator">></span>            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"grapefruit"</span><span class="token operator">></span>è‘¡è„æŸš<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"lime"</span><span class="token operator">></span>æŸ æª¬<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"coconut"</span><span class="token operator">></span>æ¤°å­<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>            <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">"mango"</span><span class="token operator">></span>èŠ’æœ<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"æäº¤"</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p><strong>å¤„ç†å¤šä¸ªè¾“å…¥</strong></p><p>å½“éœ€è¦å¤„ç†å¤šä¸ª <code>input</code> å…ƒç´ æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªå…ƒç´ æ·»åŠ  <code>name</code> å±æ€§ï¼Œå¹¶è®©å¤„ç†å‡½æ•°æ ¹æ® <code>event.target.name</code> çš„å€¼é€‰æ‹©è¦æ‰§è¡Œçš„æ“ä½œã€‚</p><p>ä¾‹å¦‚ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Reservation</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      isGoing<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      numberOfGuests<span class="token punctuation">:</span> <span class="token number">2</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleInputChange</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>    <span class="token keyword">const</span> value <span class="token operator">=</span> target<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'checkbox'</span> <span class="token operator">?</span> target<span class="token punctuation">.</span>checked <span class="token punctuation">:</span> target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>    <span class="token keyword">const</span> name <span class="token operator">=</span> target<span class="token punctuation">.</span>name<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">:</span> value    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form<span class="token operator">></span>        <span class="token operator">&lt;</span>label<span class="token operator">></span>          å‚ä¸<span class="token punctuation">:</span>          <span class="token operator">&lt;</span>input            name<span class="token operator">=</span><span class="token string">"isGoing"</span>            type<span class="token operator">=</span><span class="token string">"checkbox"</span>            checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isGoing<span class="token punctuation">}</span>            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>        <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>label<span class="token operator">></span>          æ¥å®¾äººæ•°<span class="token punctuation">:</span>          <span class="token operator">&lt;</span>input            name<span class="token operator">=</span><span class="token string">"numberOfGuests"</span>            type<span class="token operator">=</span><span class="token string">"number"</span>            value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>numberOfGuests<span class="token punctuation">}</span>            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="9-çŠ¶æ€æå‡"><a href="#9-çŠ¶æ€æå‡" class="headerlink" title="9. çŠ¶æ€æå‡"></a>9. çŠ¶æ€æå‡</h2><p>å¤šä¸ªç»„ä»¶éœ€è¦åæ˜ ç›¸åŒçš„å˜åŒ–æ•°æ®ï¼Œè¿™æ—¶æˆ‘ä»¬å»ºè®®å°†å…±äº«çŠ¶æ€æå‡åˆ°æœ€è¿‘çš„å…±åŒçˆ¶ç»„ä»¶ä¸­å»ã€‚</p><p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç”¨äºè®¡ç®—æ°´åœ¨ç»™å®šæ¸©åº¦ä¸‹æ˜¯å¦ä¼šæ²¸è…¾çš„æ¸©åº¦è®¡ç®—å™¨ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">BoilingVerdict</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>celsius <span class="token operator">>=</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>The water would boil<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">></span>The water would not boil<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>æˆ‘ä»¬å°†ç¼–å†™ä¸¤ä¸ªå¯ä»¥åœ¨æ‘„æ°åº¦ä¸åæ°åº¦ä¹‹é—´ç›¸äº’è½¬æ¢çš„å‡½æ•°ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">toCelsius</span><span class="token punctuation">(</span>fahrenheit<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>fahrenheit <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">9</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">toFahrenheit</span><span class="token punctuation">(</span>celsius<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>celsius <span class="token operator">*</span> <span class="token number">9</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">32</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>input ç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">TemperatureInput</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onTemperatureChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> temperature <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>temperature<span class="token punctuation">;</span>    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>scale<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>fieldset<span class="token operator">></span>        <span class="token operator">&lt;</span>legend<span class="token operator">></span>Enter temperature <span class="token keyword">in</span> <span class="token punctuation">{</span>scaleNames<span class="token punctuation">[</span>scale<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>legend<span class="token operator">></span>        <span class="token operator">&lt;</span>input value<span class="token operator">=</span><span class="token punctuation">{</span>temperature<span class="token punctuation">}</span>               onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è®¡ç®—ç»„ä»¶</p><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Calculator</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleCelsiusChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleCelsiusChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleFahrenheitChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleFahrenheitChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>temperature<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> scale<span class="token punctuation">:</span> <span class="token string">'c'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleCelsiusChange</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>scale<span class="token punctuation">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span> temperature<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleFahrenheitChange</span><span class="token punctuation">(</span>temperature<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>scale<span class="token punctuation">:</span> <span class="token string">'f'</span><span class="token punctuation">,</span> temperature<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>scale<span class="token punctuation">;</span>    <span class="token keyword">const</span> temperature <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>temperature<span class="token punctuation">;</span>    <span class="token keyword">const</span> celsius <span class="token operator">=</span> scale <span class="token operator">===</span> <span class="token string">'f'</span> <span class="token operator">?</span> <span class="token function">tryConvert</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> toCelsius<span class="token punctuation">)</span> <span class="token punctuation">:</span> temperature<span class="token punctuation">;</span>    <span class="token keyword">const</span> fahrenheit <span class="token operator">=</span> scale <span class="token operator">===</span> <span class="token string">'c'</span> <span class="token operator">?</span> <span class="token function">tryConvert</span><span class="token punctuation">(</span>temperature<span class="token punctuation">,</span> toFahrenheit<span class="token punctuation">)</span> <span class="token punctuation">:</span> temperature<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>TemperatureInput          scale<span class="token operator">=</span><span class="token string">"c"</span>          temperature<span class="token operator">=</span><span class="token punctuation">{</span>celsius<span class="token punctuation">}</span>          onTemperatureChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleCelsiusChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>TemperatureInput          scale<span class="token operator">=</span><span class="token string">"f"</span>          temperature<span class="token operator">=</span><span class="token punctuation">{</span>fahrenheit<span class="token punctuation">}</span>          onTemperatureChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFahrenheitChange<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>BoilingVerdict          celsius<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">parseFloat</span><span class="token punctuation">(</span>celsius<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p>è®©æˆ‘ä»¬æ¥é‡æ–°æ¢³ç†ä¸€ä¸‹å½“ä½ å¯¹è¾“å…¥æ¡†å†…å®¹è¿›è¡Œç¼–è¾‘æ—¶ä¼šå‘ç”Ÿäº›ä»€ä¹ˆï¼š</p><ul><li>React ä¼šè°ƒç”¨ DOM ä¸­ `` çš„ <code>onChange</code> æ–¹æ³•ã€‚åœ¨æœ¬å®ä¾‹ä¸­ï¼Œå®ƒæ˜¯ <code>TemperatureInput</code> ç»„ä»¶çš„ <code>handleChange</code> æ–¹æ³•ã€‚</li><li><code>TemperatureInput</code> ç»„ä»¶ä¸­çš„ <code>handleChange</code> æ–¹æ³•ä¼šè°ƒç”¨ <code>this.props.onTemperatureChange()</code>ï¼Œå¹¶ä¼ å…¥æ–°è¾“å…¥çš„å€¼ä½œä¸ºå‚æ•°ã€‚å…¶ props è¯¸å¦‚ <code>onTemperatureChange</code> ä¹‹ç±»ï¼Œå‡ç”±çˆ¶ç»„ä»¶ <code>Calculator</code> æä¾›ã€‚</li><li>èµ·åˆæ¸²æŸ“æ—¶ï¼Œç”¨äºæ‘„æ°åº¦è¾“å…¥çš„å­ç»„ä»¶ <code>TemperatureInput</code> ä¸­ <code>onTemperatureChange</code> æ–¹æ³•ä¸º <code>Calculator</code> ç»„ä»¶ä¸­çš„ <code>handleCelsiusChange</code> æ–¹æ³•ï¼Œè€Œï¼Œç”¨äºåæ°åº¦è¾“å…¥çš„å­ç»„ä»¶ <code>TemperatureInput</code> ä¸­çš„ <code>onTemperatureChange</code> æ–¹æ³•ä¸º <code>Calculator</code> ç»„ä»¶ä¸­çš„ <code>handleFahrenheitChange</code> æ–¹æ³•ã€‚å› æ­¤ï¼Œæ— è®ºå“ªä¸ªè¾“å…¥æ¡†è¢«ç¼–è¾‘éƒ½ä¼šè°ƒç”¨ <code>Calculator</code> ç»„ä»¶ä¸­å¯¹åº”çš„æ–¹æ³•ã€‚</li><li>åœ¨è¿™äº›æ–¹æ³•å†…éƒ¨ï¼Œ<code>Calculator</code> ç»„ä»¶é€šè¿‡ä½¿ç”¨æ–°çš„è¾“å…¥å€¼ä¸å½“å‰è¾“å…¥æ¡†å¯¹åº”çš„æ¸©åº¦è®¡é‡å•ä½æ¥è°ƒç”¨ <code>this.setState()</code> è¿›è€Œè¯·æ±‚ React é‡æ–°æ¸²æŸ“è‡ªå·±æœ¬èº«ã€‚</li><li>React è°ƒç”¨ <code>Calculator</code> ç»„ä»¶çš„ <code>render</code> æ–¹æ³•å¾—åˆ°ç»„ä»¶çš„ UI å‘ˆç°ã€‚æ¸©åº¦è½¬æ¢åœ¨è¿™æ—¶è¿›è¡Œï¼Œä¸¤ä¸ªè¾“å…¥æ¡†ä¸­çš„æ•°å€¼é€šè¿‡å½“å‰è¾“å…¥æ¸©åº¦å’Œå…¶è®¡é‡å•ä½æ¥é‡æ–°è®¡ç®—è·å¾—ã€‚</li><li>React ä½¿ç”¨ <code>Calculator</code> ç»„ä»¶æä¾›çš„æ–° props åˆ†åˆ«è°ƒç”¨ä¸¤ä¸ª <code>TemperatureInput</code> å­ç»„ä»¶çš„ <code>render</code> æ–¹æ³•æ¥è·å–å­ç»„ä»¶çš„ UI å‘ˆç°ã€‚</li><li>React è°ƒç”¨ <code>BoilingVerdict</code> ç»„ä»¶çš„ <code>render</code> æ–¹æ³•ï¼Œå¹¶å°†æ‘„æ°æ¸©åº¦å€¼ä»¥ç»„ä»¶ props æ–¹å¼ä¼ å…¥ã€‚</li><li>React DOM æ ¹æ®è¾“å…¥å€¼åŒ¹é…æ°´æ˜¯å¦æ²¸è…¾ï¼Œå¹¶å°†ç»“æœæ›´æ–°è‡³ DOMã€‚æˆ‘ä»¬åˆšåˆšç¼–è¾‘çš„è¾“å…¥æ¡†æ¥æ”¶å…¶å½“å‰å€¼ï¼Œå¦ä¸€ä¸ªè¾“å…¥æ¡†å†…å®¹æ›´æ–°ä¸ºè½¬æ¢åçš„æ¸©åº¦å€¼ã€‚</li></ul><h2 id="10-ç»„åˆvsç»§æ‰¿"><a href="#10-ç»„åˆvsç»§æ‰¿" class="headerlink" title="10. ç»„åˆvsç»§æ‰¿"></a>10. ç»„åˆvsç»§æ‰¿</h2><p>React æœ‰ååˆ†å¼ºå¤§çš„ç»„åˆæ¨¡å¼ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ç»„åˆè€Œéç»§æ‰¿æ¥å®ç°ç»„ä»¶é—´çš„ä»£ç é‡ç”¨ã€‚</p><p>æœ‰äº›ç»„ä»¶æ— æ³•æå‰çŸ¥æ™“å®ƒä»¬å­ç»„ä»¶çš„å…·ä½“å†…å®¹ã€‚åœ¨ <code>Sidebar</code>ï¼ˆä¾§è¾¹æ ï¼‰å’Œ <code>Dialog</code>ï¼ˆå¯¹è¯æ¡†ï¼‰ç­‰å±•ç°é€šç”¨å®¹å™¨ï¼ˆboxï¼‰çš„ç»„ä»¶ä¸­ç‰¹åˆ«å®¹æ˜“é‡åˆ°è¿™ç§æƒ…å†µã€‚</p><p>æˆ‘ä»¬å»ºè®®è¿™äº›ç»„ä»¶ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ <code>children</code> prop æ¥å°†ä»–ä»¬çš„å­ç»„ä»¶ä¼ é€’åˆ°æ¸²æŸ“ç»“æœä¸­ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">FancyBorder</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'FancyBorder FancyBorder-'</span> <span class="token operator">+</span> props<span class="token punctuation">.</span>color<span class="token punctuation">}</span><span class="token operator">></span>      <span class="token punctuation">{</span>props<span class="token punctuation">.</span>children<span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>è¿™ä½¿å¾—åˆ«çš„ç»„ä»¶å¯ä»¥é€šè¿‡ JSX åµŒå¥—ï¼Œå°†ä»»æ„ç»„ä»¶ä½œä¸ºå­ç»„ä»¶ä¼ é€’ç»™å®ƒä»¬ã€‚</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">WelcomeDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>FancyBorder color<span class="token operator">=</span><span class="token string">"blue"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"Dialog-title"</span><span class="token operator">></span>        Welcome      <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"Dialog-message"</span><span class="token operator">></span>        Thank you <span class="token keyword">for</span> visiting our spacecraft<span class="token operator">!</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>FancyBorder<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p><strong>ç‰¹ä¾‹å…³ç³»</strong></p><p>æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæŠŠä¸€äº›ç»„ä»¶çœ‹ä½œæ˜¯å…¶ä»–ç»„ä»¶çš„ç‰¹æ®Šå®ä¾‹ï¼Œæ¯”å¦‚ <code>WelcomeDialog</code> å¯ä»¥è¯´æ˜¯ <code>Dialog</code> çš„ç‰¹æ®Šå®ä¾‹ã€‚</p><p>åœ¨ React ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç»„åˆæ¥å®ç°è¿™ä¸€ç‚¹ã€‚â€œç‰¹æ®Šâ€ç»„ä»¶å¯ä»¥é€šè¿‡ props å®šåˆ¶å¹¶æ¸²æŸ“â€œä¸€èˆ¬â€ç»„ä»¶ï¼š</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Dialog</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>FancyBorder color<span class="token operator">=</span><span class="token string">"blue"</span><span class="token operator">></span>      <span class="token operator">&lt;</span>h1 className<span class="token operator">=</span><span class="token string">"Dialog-title"</span><span class="token operator">></span>        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>title<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>      <span class="token operator">&lt;</span>p className<span class="token operator">=</span><span class="token string">"Dialog-message"</span><span class="token operator">></span>        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>message<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>    <span class="token operator">&lt;</span><span class="token operator">/</span>FancyBorder<span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">WelcomeDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token operator">&lt;</span>Dialog      title<span class="token operator">=</span><span class="token string">"Welcome"</span>      message<span class="token operator">=</span><span class="token string">"Thank you for visiting our spacecraft!"</span> <span class="token operator">/</span><span class="token operator">></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><h2 id="11-ç»„ä»¶å®ä¾‹"><a href="#11-ç»„ä»¶å®ä¾‹" class="headerlink" title="11.  ç»„ä»¶å®ä¾‹"></a>11.  ç»„ä»¶å®ä¾‹</h2><p>æœ¬æ¬¡å®ä¾‹å°†å¼•å¯¼æˆ‘ä»¬æ€è€ƒå¦‚ä½•æ„å»ºä¸€ä¸ªåº”ç”¨ã€‚åœ¨è¿™ç¯‡æ–‡æ¡£ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šé€šè¿‡ React æ„å»ºä¸€ä¸ªå¯æœç´¢çš„äº§å“æ•°æ®è¡¨æ ¼æ¥æ›´æ·±åˆ»åœ°é¢†ä¼š React å“²å­¦ã€‚</p><p><img src="https://react.docschina.org/static/thinking-in-react-mock-1071fbcc9eed01fddc115b41e193ec11-4dd91.png" alt="Mockup"></p><h3 id="ç¬¬ä¸€æ­¥ï¼šå°†è®¾è®¡å¥½çš„-UI-åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§"><a href="#ç¬¬ä¸€æ­¥ï¼šå°†è®¾è®¡å¥½çš„-UI-åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šå°†è®¾è®¡å¥½çš„ UI åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§"></a>ç¬¬ä¸€æ­¥ï¼šå°†è®¾è®¡å¥½çš„ UI åˆ’åˆ†ä¸ºç»„ä»¶å±‚çº§</h3><p><img src="https://react.docschina.org/static/thinking-in-react-components-eb8bda25806a89ebdc838813bdfa3601-82965.png" alt="Component diagram"></p><ol><li><strong>FilterableProductTable (æ©™è‰²):</strong> æ˜¯æ•´ä¸ªç¤ºä¾‹åº”ç”¨çš„æ•´ä½“</li><li><strong>SearchBar (è“è‰²):</strong> æ¥å—æ‰€æœ‰çš„<em>ç”¨æˆ·è¾“å…¥</em></li><li><strong>ProductTable (ç»¿è‰²):</strong> å±•ç¤º<em>æ•°æ®å†…å®¹</em>å¹¶æ ¹æ®<em>ç”¨æˆ·è¾“å…¥</em>ç­›é€‰ç»“æœ</li><li><strong>ProductCategoryRow (å¤©è“è‰²):</strong> ä¸ºæ¯ä¸€ä¸ª<em>äº§å“ç±»åˆ«</em>å±•ç¤ºæ ‡é¢˜</li><li><strong>ProductRow (çº¢è‰²):</strong> æ¯ä¸€è¡Œå±•ç¤ºä¸€ä¸ª<em>äº§å“</em></li></ol><p>ç°åœ¨æˆ‘ä»¬å·²ç»ç¡®å®šäº†è®¾è®¡ç¨¿ä¸­åº”è¯¥åŒ…å«çš„ç»„ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æŠŠå®ƒä»¬æè¿°ä¸ºæ›´åŠ æ¸…æ™°çš„å±‚çº§ã€‚è®¾è®¡ç¨¿ä¸­è¢«å…¶ä»–ç»„ä»¶åŒ…å«çš„å­ç»„ä»¶ï¼Œåœ¨å±‚çº§ä¸Šåº”è¯¥ä½œä¸ºå…¶å­èŠ‚ç‚¹ã€‚</p><p><code>FilterableProductTable</code></p><ul><li><code>SearchBar</code></li><li><code>ProductTable</code><ul><li><code>ProductCategoryRow</code></li><li><code>ProductRow</code></li></ul></li></ul><h3 id="ç¬¬äºŒæ­¥ï¼šç”¨-React-åˆ›å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬"><a href="#ç¬¬äºŒæ­¥ï¼šç”¨-React-åˆ›å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šç”¨ React åˆ›å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬"></a>ç¬¬äºŒæ­¥ï¼šç”¨ React åˆ›å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ProductCategoryRow</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> category <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>category<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>th colSpan<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span>          <span class="token punctuation">{</span>category<span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ProductRow</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>product<span class="token punctuation">;</span>    <span class="token keyword">const</span> name <span class="token operator">=</span> product<span class="token punctuation">.</span>stocked <span class="token operator">?</span>      product<span class="token punctuation">.</span>name <span class="token punctuation">:</span>      <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span>product<span class="token punctuation">.</span>name<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ProductTable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> rows <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> lastCategory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span>category <span class="token operator">!==</span> lastCategory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        rows<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>          <span class="token operator">&lt;</span>ProductCategoryRow            category<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>category<span class="token punctuation">}</span>            key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>category<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      rows<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>        <span class="token operator">&lt;</span>ProductRow          product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span>          key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>      lastCategory <span class="token operator">=</span> product<span class="token punctuation">.</span>category<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>table<span class="token operator">></span>        <span class="token operator">&lt;</span>thead<span class="token operator">></span>          <span class="token operator">&lt;</span>tr<span class="token operator">></span>            <span class="token operator">&lt;</span>th<span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>            <span class="token operator">&lt;</span>th<span class="token operator">></span>Price<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span>        <span class="token operator">&lt;</span>tbody<span class="token operator">></span><span class="token punctuation">{</span>rows<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">SearchBar</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form<span class="token operator">></span>        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"Search..."</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>p<span class="token operator">></span>          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"checkbox"</span> <span class="token operator">/</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>          Only show products <span class="token keyword">in</span> stock        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">FilterableProductTable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>SearchBar <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>ProductTable products<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>products<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> PRODUCTS <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$49.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Football'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$9.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Baseball'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$29.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Basketball'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$99.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'iPod Touch'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$399.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'iPhone 5'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$199.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Nexus 7'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>FilterableProductTable products<span class="token operator">=</span><span class="token punctuation">{</span>PRODUCTS<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h3 id="ç¬¬ä¸‰æ­¥ï¼šç¡®å®š-UI-state-çš„æœ€å°ï¼ˆä¸”å®Œæ•´ï¼‰è¡¨ç¤º"><a href="#ç¬¬ä¸‰æ­¥ï¼šç¡®å®š-UI-state-çš„æœ€å°ï¼ˆä¸”å®Œæ•´ï¼‰è¡¨ç¤º" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç¡®å®š UI state çš„æœ€å°ï¼ˆä¸”å®Œæ•´ï¼‰è¡¨ç¤º"></a>ç¬¬ä¸‰æ­¥ï¼šç¡®å®š UI state çš„æœ€å°ï¼ˆä¸”å®Œæ•´ï¼‰è¡¨ç¤º</h3><p>æƒ³è¦ä½¿ä½ çš„ UI å…·å¤‡äº¤äº’åŠŸèƒ½ï¼Œéœ€è¦æœ‰è§¦å‘åŸºç¡€æ•°æ®æ¨¡å‹æ”¹å˜çš„èƒ½åŠ›ã€‚React é€šè¿‡ <strong>state</strong> æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚</p><p>ä¸ºäº†æ­£ç¡®åœ°æ„å»ºåº”ç”¨ï¼Œä½ é¦–å…ˆéœ€è¦æ‰¾å‡ºåº”ç”¨æ‰€éœ€çš„ state çš„æœ€å°è¡¨ç¤ºï¼Œå¹¶æ ¹æ®éœ€è¦è®¡ç®—å‡ºå…¶ä»–æ‰€æœ‰æ•°æ®ã€‚åªä¿ç•™åº”ç”¨æ‰€éœ€çš„å¯å˜ state çš„æœ€å°é›†åˆï¼Œå…¶ä»–æ•°æ®å‡ç”±å®ƒä»¬è®¡ç®—äº§ç”Ÿã€‚æ¯”å¦‚ï¼Œä½ è¦ç¼–å†™ä¸€ä¸ªä»»åŠ¡æ¸…å•åº”ç”¨ï¼Œä½ åªéœ€è¦ä¿å­˜ä¸€ä¸ªåŒ…å«æ‰€æœ‰äº‹é¡¹çš„æ•°ç»„ï¼Œè€Œæ— éœ€é¢å¤–ä¿å­˜ä¸€ä¸ªå•ç‹¬çš„ state å˜é‡ï¼ˆç”¨äºå­˜å‚¨ä»»åŠ¡ä¸ªæ•°ï¼‰ã€‚å½“ä½ éœ€è¦å±•ç¤ºä»»åŠ¡ä¸ªæ•°æ—¶ï¼Œåªéœ€è¦åˆ©ç”¨è¯¥æ•°ç»„çš„ length å±æ€§å³å¯ã€‚</p><p>é€šè¿‡é—®è‡ªå·±ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥é€ä¸ªæ£€æŸ¥ç›¸åº”æ•°æ®æ˜¯å¦å±äº stateï¼š</p><ol><li>è¯¥æ•°æ®æ˜¯å¦æ˜¯ç”±çˆ¶ç»„ä»¶é€šè¿‡ props ä¼ é€’è€Œæ¥çš„ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒåº”è¯¥ä¸æ˜¯ stateã€‚</li><li>è¯¥æ•°æ®æ˜¯å¦éšæ—¶é—´çš„æ¨ç§»è€Œä¿æŒä¸å˜ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒåº”è¯¥ä¹Ÿä¸æ˜¯ stateã€‚</li><li>ä½ èƒ½å¦æ ¹æ®å…¶ä»– state æˆ– props è®¡ç®—å‡ºè¯¥æ•°æ®çš„å€¼ï¼Ÿå¦‚æœæ˜¯ï¼Œé‚£å®ƒä¹Ÿä¸æ˜¯ stateã€‚</li></ol><h3 id="ç¬¬å››æ­¥ï¼šç¡®å®š-state-æ”¾ç½®çš„ä½ç½®"><a href="#ç¬¬å››æ­¥ï¼šç¡®å®š-state-æ”¾ç½®çš„ä½ç½®" class="headerlink" title="ç¬¬å››æ­¥ï¼šç¡®å®š state æ”¾ç½®çš„ä½ç½®"></a>ç¬¬å››æ­¥ï¼šç¡®å®š state æ”¾ç½®çš„ä½ç½®</h3><p>æ³¨æ„ï¼šReact ä¸­çš„æ•°æ®æµæ˜¯å•å‘çš„ï¼Œå¹¶é¡ºç€ç»„ä»¶å±‚çº§ä»ä¸Šå¾€ä¸‹ä¼ é€’ã€‚å“ªä¸ªç»„ä»¶åº”è¯¥æ‹¥æœ‰æŸä¸ª state è¿™ä»¶äº‹ï¼Œå¯¹åˆå­¦è€…æ¥è¯´å¾€å¾€æ˜¯æœ€éš¾ç†è§£çš„éƒ¨åˆ†ã€‚å°½ç®¡è¿™å¯èƒ½åœ¨ä¸€å¼€å§‹ä¸æ˜¯é‚£ä¹ˆæ¸…æ™°ï¼Œä½†ä½ å¯ä»¥å°è¯•é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥åˆ¤æ–­ï¼š</p><p>å¯¹äºåº”ç”¨ä¸­çš„æ¯ä¸€ä¸ª stateï¼š</p><ul><li>æ‰¾åˆ°æ ¹æ®è¿™ä¸ª state è¿›è¡Œæ¸²æŸ“çš„æ‰€æœ‰ç»„ä»¶ã€‚</li><li>æ‰¾åˆ°ä»–ä»¬çš„å…±åŒæ‰€æœ‰è€…ï¼ˆcommon ownerï¼‰ç»„ä»¶ï¼ˆåœ¨ç»„ä»¶å±‚çº§ä¸Šé«˜äºæ‰€æœ‰éœ€è¦è¯¥ state çš„ç»„ä»¶ï¼‰ã€‚</li><li>è¯¥å…±åŒæ‰€æœ‰è€…ç»„ä»¶æˆ–è€…æ¯”å®ƒå±‚çº§æ›´é«˜çš„ç»„ä»¶åº”è¯¥æ‹¥æœ‰è¯¥ stateã€‚</li><li>å¦‚æœä½ æ‰¾ä¸åˆ°ä¸€ä¸ªåˆé€‚çš„ä½ç½®æ¥å­˜æ”¾è¯¥ stateï¼Œå°±å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ä»¶æ¥å­˜æ”¾è¯¥ stateï¼Œå¹¶å°†è¿™ä¸€æ–°ç»„ä»¶ç½®äºé«˜äºå…±åŒæ‰€æœ‰è€…ç»„ä»¶å±‚çº§çš„ä½ç½®ã€‚</li></ul><h3 id="ç¬¬äº”æ­¥ï¼šæ·»åŠ åå‘æ•°æ®æµ"><a href="#ç¬¬äº”æ­¥ï¼šæ·»åŠ åå‘æ•°æ®æµ" class="headerlink" title="ç¬¬äº”æ­¥ï¼šæ·»åŠ åå‘æ•°æ®æµ"></a>ç¬¬äº”æ­¥ï¼šæ·»åŠ åå‘æ•°æ®æµ</h3><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">ProductCategoryRow</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> category <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>category<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>th colSpan<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">></span>          <span class="token punctuation">{</span>category<span class="token punctuation">}</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ProductRow</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>product<span class="token punctuation">;</span>    <span class="token keyword">const</span> name <span class="token operator">=</span> product<span class="token punctuation">.</span>stocked <span class="token operator">?</span>      product<span class="token punctuation">.</span>name <span class="token punctuation">:</span>      <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>        <span class="token punctuation">{</span>product<span class="token punctuation">.</span>name<span class="token punctuation">}</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>        <span class="token operator">&lt;</span>td<span class="token operator">></span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>price<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">ProductTable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> filterText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>filterText<span class="token punctuation">;</span>    <span class="token keyword">const</span> inStockOnly <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>inStockOnly<span class="token punctuation">;</span>    <span class="token keyword">const</span> rows <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> lastCategory <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>products<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>filterText<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>inStockOnly <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>product<span class="token punctuation">.</span>stocked<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span>category <span class="token operator">!==</span> lastCategory<span class="token punctuation">)</span> <span class="token punctuation">{</span>        rows<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>          <span class="token operator">&lt;</span>ProductCategoryRow            category<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>category<span class="token punctuation">}</span>            key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>category<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      rows<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>        <span class="token operator">&lt;</span>ProductRow          product<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">}</span>          key<span class="token operator">=</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span>name<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span>      <span class="token punctuation">)</span><span class="token punctuation">;</span>      lastCategory <span class="token operator">=</span> product<span class="token punctuation">.</span>category<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>table<span class="token operator">></span>        <span class="token operator">&lt;</span>thead<span class="token operator">></span>          <span class="token operator">&lt;</span>tr<span class="token operator">></span>            <span class="token operator">&lt;</span>th<span class="token operator">></span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>            <span class="token operator">&lt;</span>th<span class="token operator">></span>Price<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">></span>          <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">></span>        <span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">></span>        <span class="token operator">&lt;</span>tbody<span class="token operator">></span><span class="token punctuation">{</span>rows<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">SearchBar</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleFilterTextChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onFilterTextChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleInStockChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onInStockChange</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>form<span class="token operator">></span>        <span class="token operator">&lt;</span>input          type<span class="token operator">=</span><span class="token string">"text"</span>          placeholder<span class="token operator">=</span><span class="token string">"Search..."</span>          value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>filterText<span class="token punctuation">}</span>          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>p<span class="token operator">></span>          <span class="token operator">&lt;</span>input            type<span class="token operator">=</span><span class="token string">"checkbox"</span>            checked<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>inStockOnly<span class="token punctuation">}</span>            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange<span class="token punctuation">}</span>          <span class="token operator">/</span><span class="token operator">></span>          <span class="token punctuation">{</span><span class="token string">' '</span><span class="token punctuation">}</span>          Only show products <span class="token keyword">in</span> stock        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">FilterableProductTable</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      filterText<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>      inStockOnly<span class="token punctuation">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleFilterTextChange</span><span class="token punctuation">(</span>filterText<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      filterText<span class="token punctuation">:</span> filterText    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleInStockChange</span><span class="token punctuation">(</span>inStockOnly<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      inStockOnly<span class="token punctuation">:</span> inStockOnly    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token operator">&lt;</span>div<span class="token operator">></span>        <span class="token operator">&lt;</span>SearchBar          filterText<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>filterText<span class="token punctuation">}</span>          inStockOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inStockOnly<span class="token punctuation">}</span>          onFilterTextChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleFilterTextChange<span class="token punctuation">}</span>          onInStockChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleInStockChange<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span>        <span class="token operator">&lt;</span>ProductTable          products<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>products<span class="token punctuation">}</span>          filterText<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>filterText<span class="token punctuation">}</span>          inStockOnly<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>inStockOnly<span class="token punctuation">}</span>        <span class="token operator">/</span><span class="token operator">></span>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> PRODUCTS <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$49.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Football'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$9.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Baseball'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Sporting Goods'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$29.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Basketball'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$99.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'iPod Touch'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$399.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'iPhone 5'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token punctuation">{</span>category<span class="token punctuation">:</span> <span class="token string">'Electronics'</span><span class="token punctuation">,</span> price<span class="token punctuation">:</span> <span class="token string">'$199.99'</span><span class="token punctuation">,</span> stocked<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'Nexus 7'</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>  <span class="token operator">&lt;</span>FilterableProductTable products<span class="token operator">=</span><span class="token punctuation">{</span>PRODUCTS<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'container'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>æœ¬æ–‡æ€»ç»“å‚è€ƒ<a href="https://react.docschina.org/docs/getting-started.html" target="_blank" rel="noopener">reactå®˜æ–¹æ–‡æ¡£</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> react </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jså·¥å‚æ¨¡å¼</title>
      <link href="/2019/12/23/js-she-ji-mo-shi-jian-dan-gong-han-mo-shi/"/>
      <url>/2019/12/23/js-she-ji-mo-shi-jian-dan-gong-han-mo-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="jsè®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ï¼‰"><a href="#jsè®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ï¼‰" class="headerlink" title="jsè®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ï¼‰"></a>jsè®¾è®¡æ¨¡å¼ï¼ˆå·¥å‚æ¨¡å¼ï¼‰</h1><p>å°†è®¸å¤šç±»å°è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œï¼Œç„¶åé€šè¿‡è¿™ä¸ªå‡½æ•°å¯ä»¥åˆ›å»ºæˆ‘éœ€è¦çš„å¯¹è±¡ã€‚è¿™ç§å‡½æ•°é€šå¸¸è¢«ç§°ä¸ºå·¥å‚å‡½æ•°ï¼Œè¿™ç§æ¨¡å¼é€šå¸¸è¢«ç§°ä½œå·¥å‚æ¨¡å¼</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Basketball</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>intro <span class="token operator">=</span> <span class="token string">'æˆ‘æ˜¯ä¸€ä¸ªç¯®çƒ'</span><span class="token punctuation">}</span>Basketball<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function">getMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¯ä¸ªé˜Ÿä¼éœ€è¦5åé˜Ÿå‘˜'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç¯®çƒå¾ˆå¤§'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Football</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>intro <span class="token operator">=</span> <span class="token string">'æˆ‘æ˜¯ä¸€ä¸ªè¶³çƒ'</span><span class="token punctuation">}</span>Football<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function">getMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¯ä¸ªé˜Ÿä¼éœ€è¦11åé˜Ÿå‘˜'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¶³çƒå¾ˆå¤§'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Tennis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>intro <span class="token operator">=</span> <span class="token string">'æˆ‘æ˜¯ä¸€ä¸ªçªå›Šæ±‚'</span><span class="token punctuation">}</span>Tennis<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function">getMember</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ¯ä¸ªé˜Ÿä¼éœ€è¦1åé˜Ÿå‘˜'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ç½‘çƒå¾ˆå°'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">SportsFaactory</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">case</span> <span class="token string">'basketball'</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Basketball</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">case</span> <span class="token string">'football'</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Football</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">case</span> <span class="token string">'tennis'</span><span class="token punctuation">:</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tennis</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">var</span> basketball <span class="token operator">=</span> <span class="token function">SportsFaactory</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span><span class="token keyword">var</span> football <span class="token operator">=</span> <span class="token function">SportsFaactory</span><span class="token punctuation">(</span><span class="token string">'football'</span><span class="token punctuation">)</span><span class="token keyword">var</span> tennis <span class="token operator">=</span> <span class="token function">SportsFaactory</span><span class="token punctuation">(</span><span class="token string">'tennis'</span><span class="token punctuation">)</span>basketball<span class="token punctuation">.</span><span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>football<span class="token punctuation">.</span><span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>tennis<span class="token punctuation">.</span><span class="token function">getBallSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsç»§æ‰¿</title>
      <link href="/2019/12/23/js-ji-cheng/"/>
      <url>/2019/12/23/js-ji-cheng/</url>
      
        <content type="html"><![CDATA[<h1 id="jsç»§æ‰¿"><a href="#jsç»§æ‰¿" class="headerlink" title="jsç»§æ‰¿"></a>jsç»§æ‰¿</h1><p>  <strong>ç±»å¼ç»§æ‰¿</strong></p><pre class=" language-js"><code class="language-js">  <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>hobby <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'swim'</span><span class="token punctuation">,</span><span class="token string">'smoke'</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>sonName <span class="token operator">=</span> <span class="token string">'wang'</span>  <span class="token punctuation">}</span>  Son<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>sonName<span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>hobby<span class="token punctuation">)</span></code></pre><p>  ç±»å¼ç»§æ‰¿æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå½“å…¶ä¸­ä¸€ä¸ªå®ä¾‹è¢«ä¿®æ”¹æ—¶å€™ï¼Œå¦ä¸€ä¸ªå®ä¾‹ä¹Ÿè·Ÿç€å¯¹åº”çš„ä¿®æ”¹äº†,</p><pre class=" language-js"><code class="language-js">  <span class="token keyword">let</span> son2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  son2<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'sleep'</span><span class="token punctuation">)</span>  son<span class="token punctuation">.</span>hobby <span class="token comment" spellcheck="true">// ['swim','smoke','sleep']</span></code></pre><p>  <strong>æ„é€ å‡½æ•°ç»§æ‰¿</strong></p><pre class=" language-js"><code class="language-js">  <span class="token keyword">function</span> <span class="token function">SuperClass</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'javascript'</span><span class="token punctuation">,</span><span class="token string">'html'</span><span class="token punctuation">,</span><span class="token string">'css'</span><span class="token punctuation">]</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  SuperClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>showBooks <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>books<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">function</span> <span class="token function">SubClass</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>    SuperClass<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">var</span> instatncel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubClass</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>  <span class="token keyword">var</span> instance2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubClass</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span>  instancel<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//['javascript','html','css','vue']</span>  instance2<span class="token punctuation">.</span>books <span class="token comment" spellcheck="true">//[javascript,html,css]</span>  instancel<span class="token punctuation">.</span><span class="token function">showBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//typeError</span></code></pre><p>  ç”±äºcallæ–¹æ³•å¯ä»¥æ›´æ”¹å‡½æ•°çš„ä½œç”¨ç¯å¢ƒï¼Œå› æ­¤åœ¨å­ç±»ä¸­ï¼Œå¯¹superclassè°ƒç”¨è¿™ä¸ªæ–¹æ³•å°±æ˜¯å°†å­ç±»ä¸­çš„å˜é‡åœ¨çˆ¶ç±»ä¸­æ‰§è¡Œä¸€éï¼Œä½†æ˜¯è¿™ç§ç±»å‹çš„ç»§æ‰¿æ²¡æœ‰è®¾è®¡åŸå‹prototypeï¼Œæ‰€æœ‰çˆ¶ç±»çš„åŸå‹æ–¹æ³•è‡ªç„¶ä¸ä¼šè¢«å­ç±»ç»§æ‰¿ã€‚</p><p>  <strong>ç»„åˆç»§æ‰¿</strong></p><pre class=" language-js"><code class="language-js">  <span class="token keyword">function</span> <span class="token function">SuperClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zhangsan'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>books <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token string">'css'</span><span class="token punctuation">,</span>      <span class="token string">'javascript'</span><span class="token punctuation">,</span>      <span class="token string">'html'</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span>  SuperClass<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getName <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">function</span> <span class="token function">SubClass</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">{</span>    SuperClass<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id  <span class="token punctuation">}</span>  SubClass<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubClass</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubClass</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  instance1<span class="token punctuation">.</span>books<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'vue'</span><span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>books<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//['css','javascript','html','vue']</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance2<span class="token punctuation">.</span>books<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//['css','javascript','html']</span>  instance1<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">//'zhangsan'</span></code></pre><p>  ç»„åˆæ¨¡å¼å°±æ˜¯å°†è¿™ä¸¤ç‚¹çš„ä¼˜åŠ¿ç»“åˆèµ·æ¥ã€‚</p><p>  <strong>åŸå‹å¼ç»§æ‰¿</strong></p><p>  â€‹</p>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>jsåŸç†é¢˜æ€»ç»“</title>
      <link href="/2019/12/23/js-yuan-li-ti-zong-jie/"/>
      <url>/2019/12/23/js-yuan-li-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="jsåŸç†é¢˜æ€»ç»“"><a href="#jsåŸç†é¢˜æ€»ç»“" class="headerlink" title="jsåŸç†é¢˜æ€»ç»“"></a>jsåŸç†é¢˜æ€»ç»“</h1><h2 id="1-å®ç°ä¸€ä¸ªcallå‡½æ•°"><a href="#1-å®ç°ä¸€ä¸ªcallå‡½æ•°" class="headerlink" title="1. å®ç°ä¸€ä¸ªcallå‡½æ•°"></a>1. å®ç°ä¸€ä¸ªcallå‡½æ•°</h2><pre class=" language-js"><code class="language-js">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>mycall <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token operator">!==</span><span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'not function'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  context <span class="token operator">=</span> context <span class="token operator">||</span> window  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token keyword">let</span> arg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">)</span>  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn  <span class="token keyword">return</span> result <span class="token punctuation">}</span></code></pre><h2 id="2-å®ç°ä¸€ä¸ªapplyå‡½æ•°"><a href="#2-å®ç°ä¸€ä¸ªapplyå‡½æ•°" class="headerlink" title="2. å®ç°ä¸€ä¸ªapplyå‡½æ•°"></a>2. å®ç°ä¸€ä¸ªapplyå‡½æ•°</h2><pre class=" language-js"><code class="language-js">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>myapply <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token operator">!==</span><span class="token string">'function'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'not function'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  context <span class="token operator">=</span> context <span class="token operator">||</span> window  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token keyword">let</span> result   <span class="token keyword">if</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn  <span class="token keyword">return</span> result <span class="token punctuation">}</span></code></pre><h2 id="3-å®ç°ä¸€ä¸ªbindå‡½æ•°"><a href="#3-å®ç°ä¸€ä¸ªbindå‡½æ•°" class="headerlink" title="3. å®ç°ä¸€ä¸ªbindå‡½æ•°"></a>3. å®ç°ä¸€ä¸ªbindå‡½æ•°</h2><pre class=" language-js"><code class="language-js">Function<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>mybind <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">'funciton'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeErrorr</span><span class="token punctuation">(</span><span class="token string">'not function'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>   <span class="token keyword">let</span> arg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">F</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_this</span><span class="token punctuation">(</span><span class="token operator">...</span>arg<span class="token punctuation">,</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> _this<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="4-instanceofåŸç†"><a href="#4-instanceofåŸç†" class="headerlink" title="4. instanceofåŸç†"></a>4. instanceofåŸç†</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">instanceOf</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">let</span> leftValue <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__  <span class="token keyword">let</span> rightValue <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>leftValue <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>leftValue <span class="token operator">===</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span>    leftValue <span class="token operator">=</span> rightValue<span class="token punctuation">.</span>__proto__  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="5-Object-createçš„åŸºæœ¬å®ç°åŸç†"><a href="#5-Object-createçš„åŸºæœ¬å®ç°åŸç†" class="headerlink" title="5. Object.createçš„åŸºæœ¬å®ç°åŸç†"></a>5. Object.createçš„åŸºæœ¬å®ç°åŸç†</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token function">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  F<span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="6-newæœ¬è´¨"><a href="#6-newæœ¬è´¨" class="headerlink" title="6. newæœ¬è´¨"></a>6. newæœ¬è´¨</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>      __proto__<span class="token punctuation">:</span>fun<span class="token punctuation">.</span>prototype    <span class="token punctuation">}</span>    fun<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span>    <span class="token keyword">return</span> obj  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">person</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span>age <span class="token punctuation">}</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'wang'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span></code></pre><h2 id="7-å®ç°ä¸€ä¸ªåŸºæœ¬çš„promise"><a href="#7-å®ç°ä¸€ä¸ªåŸºæœ¬çš„promise" class="headerlink" title="7. å®ç°ä¸€ä¸ªåŸºæœ¬çš„promise"></a>7. å®ç°ä¸€ä¸ªåŸºæœ¬çš„promise</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'pending'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> undefined    <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> undefined    <span class="token keyword">let</span> resolve <span class="token operator">=</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'pedding'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'fulfilled'</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> reject <span class="token operator">=</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'rejected'</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>reason <span class="token operator">=</span> value      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token function">fn</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">then</span><span class="token punctuation">(</span>onFulfilled<span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">case</span> <span class="token string">'fulfilled'</span><span class="token punctuation">:</span>  <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">break</span><span class="token punctuation">;</span>  <span class="token keyword">case</span> <span class="token string">'rejected'</span><span class="token punctuation">:</span>  <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="8-å®ç°æµ…æ‹·è´"><a href="#8-å®ç°æµ…æ‹·è´" class="headerlink" title="8. å®ç°æµ…æ‹·è´"></a>8. å®ç°æµ…æ‹·è´</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 1. ...å®ç°</span><span class="token keyword">let</span> copy1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 2. Object.assignå®ç°</span><span class="token keyword">let</span> copy2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="9-å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´"><a href="#9-å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´" class="headerlink" title="9. å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´"></a>9. å®ç°ä¸€ä¸ªåŸºæœ¬çš„æ·±æ‹·è´</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 1. JOSN.stringify()/JSON.parse()</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token punctuation">{</span>x<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// 2. é€’å½’æ‹·è´</span><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> copy <span class="token operator">=</span> obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      copy<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">typeof</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> copy<span class="token punctuation">}</span></code></pre><h2 id="10-ä½¿ç”¨setTimeOutæ¨¡æ‹ŸsetInterval"><a href="#10-ä½¿ç”¨setTimeOutæ¨¡æ‹ŸsetInterval" class="headerlink" title="10. ä½¿ç”¨setTimeOutæ¨¡æ‹ŸsetInterval"></a>10. ä½¿ç”¨setTimeOutæ¨¡æ‹ŸsetInterval</h2><pre class=" language-js"><code class="language-js">setTimeout <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// do something</span>  setTimeout <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>callee<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span></code></pre><h2 id="11-jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•-å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§"><a href="#11-jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•-å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§" class="headerlink" title="11. jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•// å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§"></a>11. jså®ç°ä¸€ä¸ªç»§æ‰¿æ–¹æ³•// å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿å®ä¾‹å±æ€§</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> Child <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  Parent<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// å¯„ç”Ÿç»§æ‰¿åŸå‹å±æ€§</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> Super <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  Super<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Parent<span class="token punctuation">.</span>prototype  Child<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre><h2 id="12-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event-Bus"><a href="#12-å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event-Bus" class="headerlink" title="12. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event Bus"></a>12. å®ç°ä¸€ä¸ªåŸºæœ¬çš„Event Bus</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// ç»„ä»¶é€šä¿¡ï¼Œä¸€ä¸ªè§¦å‘ä¸ç›‘å¬çš„è¿‡ç¨‹</span><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>  constructor <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å­˜å‚¨äº‹ä»¶</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">||</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// ç›‘å¬äº‹ä»¶</span>  addListener <span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// è§¦å‘äº‹ä»¶</span>  emit <span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> handle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>    handle<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// æµ‹è¯•</span><span class="token keyword">let</span> emitter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// ç›‘å¬äº‹ä»¶</span>emitter<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token string">'ages'</span><span class="token punctuation">,</span> age <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è§¦å‘äº‹ä»¶</span>emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'ages'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// 18</span></code></pre><h2 id="13-å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š"><a href="#13-å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š" class="headerlink" title="13. å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š"></a>13. å®ç°ä¸€ä¸ªåŒå‘æ•°æ®ç»‘å®š</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">let</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token keyword">let</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  configurable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è·å–æ•°æ®äº†'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> obj<span class="token punctuation">.</span>text  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">set</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æ•°æ®æ›´æ–°äº†'</span><span class="token punctuation">)</span>    input<span class="token punctuation">.</span>value <span class="token operator">=</span> newVal    span<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> newVal  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  obj<span class="token punctuation">.</span>text <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre><h2 id="14-å®ç°ä¸€ä¸ªç®€å•è·¯ç”±"><a href="#14-å®ç°ä¸€ä¸ªç®€å•è·¯ç”±" class="headerlink" title="14. å®ç°ä¸€ä¸ªç®€å•è·¯ç”±"></a>14. å®ç°ä¸€ä¸ªç®€å•è·¯ç”±</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Route</span><span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// è·¯ç”±å­˜å‚¨å¯¹è±¡</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>routes <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// å½“å‰hash</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>currentHash <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment" spellcheck="true">// ç»‘å®šthisï¼Œé¿å…ç›‘å¬æ—¶thisæŒ‡å‘æ”¹å˜</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>freshRoute <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>freshRoute<span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// ç›‘å¬</span>    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>freshRoute<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>freshRoute<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// å­˜å‚¨</span>  storeRoute <span class="token punctuation">(</span>path<span class="token punctuation">,</span> cb<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> cb <span class="token operator">||</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// æ›´æ–°</span>  freshRoute <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>currentHash <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'/'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>routes<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentHash<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="15-å®ç°æ‡’åŠ è½½"><a href="#15-å®ç°æ‡’åŠ è½½" class="headerlink" title="15. å®ç°æ‡’åŠ è½½"></a>15. å®ç°æ‡’åŠ è½½</h2><pre class=" language-js"><code class="language-js"><span class="token operator">&lt;</span>ul<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/1.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/2.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/3.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/4.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/5.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/6.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/7.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/8.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/9.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>  <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./imgs/default.png"</span> data<span class="token operator">=</span><span class="token string">"./imgs/10.png"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span><span class="token keyword">let</span> imgs <span class="token operator">=</span>  document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å¯è§†åŒºé«˜åº¦</span><span class="token keyword">let</span> clientHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight<span class="token keyword">function</span> lazyLoad <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// æ»šåŠ¨å·å»çš„é«˜åº¦</span>  <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">// å¾—åˆ°å›¾ç‰‡é¡¶éƒ¨è·ç¦»å¯è§†åŒºé¡¶éƒ¨çš„è·ç¦»</span>    <span class="token keyword">let</span> x <span class="token operator">=</span> clientHeight <span class="token operator">+</span> scrollTop <span class="token operator">-</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>offsetTop    <span class="token comment" spellcheck="true">// å›¾ç‰‡åœ¨å¯è§†åŒºå†…</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> clientHeight<span class="token operator">+</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">{</span>      imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">setInterval</span><span class="token punctuation">(</span>lazyLoad<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span></code></pre><h2 id="16-remå®ç°åŸç†"><a href="#16-remå®ç°åŸç†" class="headerlink" title="16. remå®ç°åŸç†"></a>16. remå®ç°åŸç†</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> setRem <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> doc <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement  <span class="token keyword">let</span> width <span class="token operator">=</span> doc<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width  <span class="token comment" spellcheck="true">// å‡è®¾è®¾è®¡ç¨¿ä¸ºå®½750ï¼Œåˆ™remä¸º10px</span>  <span class="token keyword">let</span> rem <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">75</span>  doc<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">}</span></code></pre><h2 id="17-æ‰‹å†™å®ç°AJAX"><a href="#17-æ‰‹å†™å®ç°AJAX" class="headerlink" title="17. æ‰‹å†™å®ç°AJAX"></a>17. æ‰‹å†™å®ç°AJAX</h2><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// 1. ç®€å•å®ç°</span><span class="token comment" spellcheck="true">// å®ä¾‹åŒ–</span><span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// åˆå§‹åŒ–</span>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">async</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">// å‘é€è¯·æ±‚</span>xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">// è®¾ç½®çŠ¶æ€å˜åŒ–å›è°ƒå¤„ç†è¯·æ±‚ç»“æœ</span>xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyStatus <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">// 2. åŸºäºpromiseå®ç°</span><span class="token keyword">function</span> ajax <span class="token punctuation">(</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// è¯·æ±‚åœ°å€</span>  <span class="token keyword">const</span> url <span class="token operator">=</span> options<span class="token punctuation">.</span>url  <span class="token comment" spellcheck="true">// è¯·æ±‚æ–¹æ³•</span>  <span class="token keyword">const</span> method <span class="token operator">=</span> options<span class="token punctuation">.</span>method<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'get'</span>  <span class="token comment" spellcheck="true">// é»˜è®¤ä¸ºå¼‚æ­¥true</span>  <span class="token keyword">const</span> <span class="token keyword">async</span> <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token keyword">async</span>  <span class="token comment" spellcheck="true">// è¯·æ±‚å‚æ•°</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> options<span class="token punctuation">.</span>data  <span class="token comment" spellcheck="true">// å®ä¾‹åŒ–</span>  <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment" spellcheck="true">// è¯·æ±‚è¶…æ—¶</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>timeout <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>timeout <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> options<span class="token punctuation">.</span>timeout  <span class="token punctuation">}</span>  <span class="token comment" spellcheck="true">// è¿”å›ä¸€ä¸ªPromiseå®ä¾‹</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>    xhr<span class="token punctuation">.</span>ontimeout <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'è¯·æ±‚è¶…æ—¶'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// ç›‘å¬çŠ¶æ€å˜åŒ–å›è°ƒ</span>    xhr<span class="token punctuation">.</span>onreadystatechange <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// 200-300 ä¹‹é—´è¡¨ç¤ºè¯·æ±‚æˆåŠŸï¼Œ304èµ„æºæœªå˜ï¼Œå–ç¼“å­˜</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">>=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span> <span class="token operator">||</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          resolve <span class="token operator">&amp;&amp;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// é”™è¯¯å›è°ƒ</span>    xhr<span class="token punctuation">.</span>onerror <span class="token operator">=</span> err <span class="token operator">=</span><span class="token operator">></span> reject <span class="token operator">&amp;&amp;</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">let</span> paramArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> encodeData    <span class="token comment" spellcheck="true">// å¤„ç†è¯·æ±‚å‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment" spellcheck="true">// å‚æ•°æ‹¼æ¥éœ€è¦é€šè¿‡ encodeURIComponent è¿›è¡Œç¼–ç </span>        paramArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      encodeData <span class="token operator">=</span> paramArr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// getè¯·æ±‚æ‹¼æ¥å‚æ•°</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// æ£€æµ‹urlä¸­æ˜¯å¦å·²å­˜åœ¨ ? åŠå…¶ä½ç½®</span>      <span class="token keyword">const</span> index <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> url <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'?'</span>      <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> url<span class="token punctuation">.</span>length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> url <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'&amp;'</span>      <span class="token comment" spellcheck="true">// æ‹¼æ¥url</span>      url <span class="token operator">+</span><span class="token operator">=</span> encodeData    <span class="token punctuation">}</span>    <span class="token comment" spellcheck="true">// åˆå§‹åŒ–</span>    xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token keyword">async</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// å‘é€è¯·æ±‚</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'get'</span><span class="token punctuation">)</span> xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// post æ–¹å¼éœ€è¦è®¾ç½®è¯·æ±‚å¤´</span>      xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'application/x-www-form-urlencoded;charset=UTF-8'</span><span class="token punctuation">)</span>      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>encodeData<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code></pre><h2 id="18-å®ç°æ‹–æ‹½"><a href="#18-å®ç°æ‹–æ‹½" class="headerlink" title="18. å®ç°æ‹–æ‹½"></a>18. å®ç°æ‹–æ‹½</h2><pre class=" language-js"><code class="language-js"> window<span class="token punctuation">.</span>onload <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// dragå¤„äºç»å¯¹å®šä½çŠ¶æ€</span>  <span class="token keyword">let</span> drag <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span>  drag<span class="token punctuation">.</span>onmousedown <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> e <span class="token operator">=</span> e <span class="token operator">||</span> window<span class="token punctuation">.</span>event    <span class="token comment" spellcheck="true">// é¼ æ ‡ä¸æ‹–æ‹½å…ƒç´ è¾¹ç•Œçš„è·ç¦» = é¼ æ ‡ä¸å¯è§†åŒºè¾¹ç•Œçš„è·ç¦» - æ‹–æ‹½å…ƒç´ ä¸è¾¹ç•Œçš„è·ç¦»</span>    <span class="token keyword">let</span> diffX <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetLeft    <span class="token keyword">let</span> diffY <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetTop    drag<span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment" spellcheck="true">// æ‹–æ‹½å…ƒç´ ç§»åŠ¨çš„è·ç¦» = é¼ æ ‡ä¸å¯è§†åŒºè¾¹ç•Œçš„è·ç¦» - é¼ æ ‡ä¸æ‹–æ‹½å…ƒç´ è¾¹ç•Œçš„è·ç¦»</span>      <span class="token keyword">let</span> left <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX <span class="token operator">-</span> diffX      <span class="token keyword">let</span> top <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY <span class="token operator">-</span> diffY      <span class="token comment" spellcheck="true">// é¿å…æ‹–æ‹½å‡ºå¯è§†åŒº</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        left <span class="token operator">=</span> <span class="token number">0</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">></span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>        left <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetWidth      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        top <span class="token operator">=</span> <span class="token number">0</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>top <span class="token operator">></span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>        top <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">-</span> drag<span class="token punctuation">.</span>offsetHeight      <span class="token punctuation">}</span>      drag<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">'px'</span>      drag<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> top <span class="token operator">+</span> <span class="token string">'px'</span>    <span class="token punctuation">}</span>    drag<span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>onmousemove <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>onmouseup <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h2 id="19-å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°"><a href="#19-å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°" class="headerlink" title="19. å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°"></a>19. å®ç°ä¸€ä¸ªèŠ‚æµå‡½æ•°</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> throttle <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// åˆ©ç”¨é—­åŒ…ä¿å­˜æ—¶é—´</span>  <span class="token keyword">let</span> prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">let</span> arg <span class="token operator">=</span> arguments    <span class="token keyword">let</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> prev <span class="token operator">>=</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>      fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>      prev <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> fn <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'èŠ‚æµ'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">throttle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><h2 id="20-å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°"><a href="#20-å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°" class="headerlink" title="20. å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°"></a>20. å®ç°ä¸€ä¸ªé˜²æŠ–å‡½æ•°</h2><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> debounce <span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment" spellcheck="true">// åˆ©ç”¨é—­åŒ…ä¿å­˜å®šæ—¶å™¨</span>  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">let</span> arg <span class="token operator">=</span> arguments    <span class="token comment" spellcheck="true">// åœ¨è§„å®šæ—¶é—´å†…å†æ¬¡è§¦å‘ä¼šå…ˆæ¸…é™¤å®šæ—¶å™¨åå†é‡è®¾å®šæ—¶å™¨</span>    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      fn<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arg<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> fn <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'é˜²æŠ–'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git</title>
      <link href="/2019/12/23/git/"/>
      <url>/2019/12/23/git/</url>
      
        <content type="html"><![CDATA[<h1 id="Gitçš„ç›¸å…³çŸ¥è¯†ç‚¹"><a href="#Gitçš„ç›¸å…³çŸ¥è¯†ç‚¹" class="headerlink" title="Gitçš„ç›¸å…³çŸ¥è¯†ç‚¹"></a>Gitçš„ç›¸å…³çŸ¥è¯†ç‚¹</h1><h2 id="git-reset"><a href="#git-reset" class="headerlink" title="git reset"></a>git reset</h2><ul><li>git reset çš„ä½œç”¨æ˜¯ä¿®æ”¹HEADçš„ä½ç½®ï¼Œå³å°†HEADæŒ‡å‘çš„ä½ç½® æ”¹å˜ä¸ºä¹‹å‰å­˜åœ¨çš„æŸä¸ªç‰ˆæœ¬ï¼Œå¦‚æœæƒ³æ¢å¤åˆ°ä¹‹å‰çš„æŸä¸ªæäº¤çš„ç‰ˆæœ¬ï¼Œä¸”é‚£ä¸ªç‰ˆæœ¬ä¹‹åçš„æäº¤çš„ç‰ˆæœ¬ä¸è¦äº†ï¼Œå¯ä»¥ä½¿ç”¨ã€‚</li><li>æ˜¯æ¯”è¾ƒå¼ºç¡¬çš„å›é€€ï¼Œå¦‚æœæ²¡æœ‰æäº¤åˆ°è¿œç¨‹ä»“åº“å¯ä»¥ä½¿ç”¨</li></ul><h2 id="git-revert"><a href="#git-revert" class="headerlink" title="git revert"></a>git revert</h2><ul><li>git revert çš„ä½œç”¨é€šè¿‡ååšåˆ›å»ºä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æ¢å¤ä¹‹å‰çš„æŸä¸€ä¸ªç‰ˆæœ¬ï¼Œä½†æ˜¯åˆæƒ³ä¿ç•™è¯¥ç›®æ ‡ç‰ˆæœ¬åé¢çš„ç‰ˆæœ¬ï¼Œè®°å½•ä¸‹æ•´ä¸ªç‰ˆæœ¬å˜åŠ¨çš„æµç¨‹ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</li><li>å¸¸ç”¨äºæäº¤åˆ°è¿œç¨‹ä»“åº“çš„å›æ»šï¼Œç”Ÿæˆä¸€æ¬¡æ–°çš„æäº¤</li></ul><h2 id="git-branch"><a href="#git-branch" class="headerlink" title="git branch"></a>git branch</h2><ul><li>git branch åˆ†æ”¯ç›¸å…³çš„æ“ä½œï¼Œå¯ç”¨äºåƒæŸ¥çœ‹ï¼Œæ–°å»ºï¼Œåˆ é™¤åˆ†æ”¯ä»¥åŠåˆ†æ”¯é‡å‘½åæ“ä½œ</li></ul><h2 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h2><ul><li>ç”¨äºå¯¹æ¯”ä¸¤æ¬¡ä¿®æ”¹çš„å·®å¼‚ å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‚æ•°æ¥æŒ‡å®šå¯¹æ¯”å“ªä¸¤æ¬¡ä¿®æ”¹</li></ul><h2 id="git-merge"><a href="#git-merge" class="headerlink" title="git merge"></a>git merge</h2><ul><li>ç”¨äºåˆå¹¶åˆ†æ”¯æˆ–è€…æŸæ¬¡æäº¤ ä¸€èˆ¬ç”¨äºå°†åˆ†æ”¯æˆ–ä¿®æ”¹çš„å†…å®¹åˆå¹¶åˆ°masterä¸Š</li></ul><h2 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h2><ul><li>ç”¨äºå°†ä¿®æ”¹çš„æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº</li><li><code>git add .</code>ä¼šæŠŠæ‰€æœ‰çš„æ–‡ä»¶éƒ½åŠ å…¥åˆ°æš‚å­˜åŒº <strong>å¿½ç•¥.gitignore</strong></li></ul><h2 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h2><ul><li>å°†æš‚å­˜åŒºçš„ä»£ç æäº¤åˆ°ä»£ç åº“</li><li><code>git commit -m&#39;æäº¤ä¿¡æ¯</code></li></ul><h2 id="git-log"><a href="#git-log" class="headerlink" title="git log"></a>git log</h2><ul><li><p>æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°æœ€è¿‘çš„ä¸‰æ¬¡æäº¤</p></li><li><p><code>git log --pretty=oneline</code>å¦‚æœå«Œè¾“å…¥çš„ä¿¡æ¯å¤ªå¤šï¼Œ</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>js ä¼˜é›…å†™æ³•æ€»ç»“</title>
      <link href="/2019/12/23/js-you-ya-xie-fa-zong-jie/"/>
      <url>/2019/12/23/js-you-ya-xie-fa-zong-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="jsä¼˜é›…å†™æ³•"><a href="#jsä¼˜é›…å†™æ³•" class="headerlink" title="jsä¼˜é›…å†™æ³•"></a>jsä¼˜é›…å†™æ³•</h1><ul><li><p>å°è£…å¤šä¸ªå‡½æ•°</p><p>ä¼ ç»Ÿå†™æ³•</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">checkName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">checkEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">checkPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre><p>ä¼˜é›…å†™æ³•</p><pre class=" language-js"><code class="language-js"><span class="token keyword">let</span> checkType <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>addCheck <span class="token operator">=</span> <span class="token punctuation">(</span>type <span class="token punctuation">,</span>fn<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> check <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">checkType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>check<span class="token punctuation">.</span><span class="token function">addCheck</span><span class="token punctuation">(</span><span class="token string">'checkName'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is checkName'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addCheck</span><span class="token punctuation">(</span><span class="token string">'checkPsw'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is checkPsw'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>a<span class="token punctuation">.</span><span class="token function">checkName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">checkPsw</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>flexå¼¹æ€§å¸ƒå±€</title>
      <link href="/2019/12/23/flex-dan-xing-bu-ju/"/>
      <url>/2019/12/23/flex-dan-xing-bu-ju/</url>
      
        <content type="html"><![CDATA[<h1 id="flexå¼¹æ€§å¸ƒå±€"><a href="#flexå¼¹æ€§å¸ƒå±€" class="headerlink" title="flexå¼¹æ€§å¸ƒå±€"></a>flexå¼¹æ€§å¸ƒå±€</h1><p>flex å¼¹æ€§ç›’å­æ¨¡å‹å£°æ˜ <code>display:flex</code>ï¼Œé‚£ä¹ˆè¿™ä¸ªå…ƒç´ å°±æˆä¸ºäº†å¼¹æ€§å®¹å™¨ï¼Œå…·æœ‰flexå¼¹æ€§å¸ƒå±€çš„ç‰¹æ€§ã€‚</p><ol><li>æ¯ä¸ªå¼¹æ€§å®¹å™¨éƒ½æœ‰ä¸¤æ ¹è½´ï¼š<strong>ä¸»è½´å’Œäº¤å‰è½´</strong>ï¼Œä¸¤è½´ä¹‹é—´æˆ90åº¦å…³ç³»ã€‚æ³¨æ„ï¼š<strong>æ°´å¹³çš„ä¸ä¸€å®šå°±æ˜¯ä¸»è½´ã€‚</strong></li><li>æ¯æ ¹è½´éƒ½æœ‰<strong>èµ·ç‚¹å’Œç»ˆç‚¹</strong>ï¼Œè¿™å¯¹äºå…ƒç´ çš„å¯¹é½éå¸¸é‡è¦ã€‚</li><li>å¼¹æ€§å®¹å™¨ä¸­çš„æ‰€æœ‰å­å…ƒç´ ç§°ä¸º&lt;å¼¹æ€§å…ƒç´ &gt;ï¼Œ<strong>å¼¹æ€§å…ƒç´ æ°¸è¿œæ²¿ä¸»è½´æ’åˆ—</strong>ã€‚</li><li>å¼¹æ€§å…ƒç´ ä¹Ÿå¯ä»¥é€šè¿‡<code>display:flex</code>è®¾ç½®ä¸ºå¦ä¸€ä¸ªå¼¹æ€§å®¹å™¨ï¼Œå½¢æˆåµŒå¥—å…³ç³»ã€‚å› æ­¤<strong>ä¸€ä¸ªå…ƒç´ æ—¢å¯ä»¥æ˜¯å¼¹æ€§å®¹å™¨ä¹Ÿå¯ä»¥æ˜¯å¼¹æ€§å…ƒç´ </strong>ã€‚</li></ol><p><strong>å®¹å™¨å±æ€§</strong></p><ul><li>flex-flow</li><li>flex-direction</li><li>flex-wrap</li><li>justify-content</li><li>align-items</li><li>algin-content</li></ul><p><strong>å…ƒç´ å±æ€§</strong></p><ul><li>order</li><li>flex-grow</li><li>flex-shrink</li><li>flex-basis</li><li>flex</li><li>align-self</li></ul>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptä¸­æ‰“ä¹±æ•°ç»„æ’åº</title>
      <link href="/2019/12/23/javascript-zhong-da-luan-shu-zu-sui-ji-pai-xu/"/>
      <url>/2019/12/23/javascript-zhong-da-luan-shu-zu-sui-ji-pai-xu/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScriptä¸­æ‰“ä¹±æ•°ç»„æ’åº"><a href="#JavaScriptä¸­æ‰“ä¹±æ•°ç»„æ’åº" class="headerlink" title="JavaScriptä¸­æ‰“ä¹±æ•°ç»„æ’åº"></a>JavaScriptä¸­æ‰“ä¹±æ•°ç»„æ’åº</h1><ul><li><p>åˆ©ç”¨sort()å‡½æ•°</p><pre class=" language-js"><code class="language-js">arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span></code></pre><p>ä½†æ˜¯è¿™ç§æ’åºç”±äºv8å¼•æ“ä¸­é’ˆå¯¹çŸ­æ•°ç»„å’Œé•¿æ•°ç»„ä½¿ç”¨äº†ä¸åŒçš„æ’åºæ–¹æ³•ã€‚å¹¶ä¸”sortæ–¹æ³•ä¸­å¯¹äºåŒä¸€ç»„a,bå€¼éœ€è¦æ€»æ˜¯è¿”å›ç›¸åŒçš„å€¼ã€‚</p></li><li><p>Fisher-Yates shuffle(æ´—ç‰Œç®—æ³•)</p><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> i <span class="token operator">=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> j <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token punctuation">{</span>    arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> idx<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> targetIdx <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>        <span class="token punctuation">;</span><span class="token punctuation">[</span>arr<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>targetIdx<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>targetIdx<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> arr<span class="token punctuation">}</span></code></pre><p>å¦‚æœè¦å°†æ•°ç»„éšæœºæ’åºï¼Œç›®å‰è€Œè¨€ï¼ŒFisherâ€“Yates shuffle ç®—æ³•åº”è¯¥æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> alg </category>
          
      </categories>
      
      
        <tags>
            
            <tag> alg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…ç›¸å…³çš„æœåŠ¡å™¨æ–‡ä»¶</title>
      <link href="/2019/12/23/1-an-zhuang-xiang-guan-de-fu-wu-qi-wen-jian/"/>
      <url>/2019/12/23/1-an-zhuang-xiang-guan-de-fu-wu-qi-wen-jian/</url>
      
        <content type="html"><![CDATA[<h3 id="1-å®‰è£…ç›¸å…³çš„æœåŠ¡å™¨æ–‡ä»¶"><a href="#1-å®‰è£…ç›¸å…³çš„æœåŠ¡å™¨æ–‡ä»¶" class="headerlink" title="1 å®‰è£…ç›¸å…³çš„æœåŠ¡å™¨æ–‡ä»¶"></a>1 å®‰è£…ç›¸å…³çš„æœåŠ¡å™¨æ–‡ä»¶</h3><ul><li>apache-tomcat</li><li>jdk      windows/linuxå…·ä½“çœ‹æœåŠ¡å™¨æ˜¯ä»€ä¹ˆ</li><li>putty    å¯¹è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œæ“ä½œ</li><li>FileZilla   å¯¹æœåŠ¡å™¨æ–‡ä»¶è¿›è¡Œcopy </li></ul><h3 id="2-FileZilla"><a href="#2-FileZilla" class="headerlink" title="2 FileZilla"></a>2 FileZilla</h3><ul><li>è¾“å…¥ä¸»æœºåœ°å€ï¼Œç”¨æˆ·åï¼Œå¯†ç è¿›è¡Œç™»å½•ï¼ˆå¯†ç ä¸€èˆ¬æ˜¯æœåŠ¡å™¨æ³¨å†Œæ˜¯è¾“å…¥çš„å¯†ç ï¼‰</li><li>è¿›è¡Œæ–‡ä»¶çš„ä¸Šä¼ </li></ul><h3 id="3-putty"><a href="#3-putty" class="headerlink" title="3 putty"></a>3 putty</h3><ul><li>è¿›å…¥è¿œç¨‹æœåŠ¡å™¨</li><li>è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•</li><li><code>ll</code>æŸ¥çœ‹æ–‡ä»¶ç›®å½•</li></ul><h3 id="éƒ¨ç½²é¡¹ç›®"><a href="#éƒ¨ç½²é¡¹ç›®" class="headerlink" title="éƒ¨ç½²é¡¹ç›®"></a>éƒ¨ç½²é¡¹ç›®</h3><ul><li>æ‰“åŒ…è‡ªå·±çš„é¡¹ç›®ï¼Œä¾‹å¦‚vueé¡¹ç›®<code>npm run build</code>å°†æ‰“åŒ…å¥½çš„distè§£å‹æ”¾åœ¨æœåŠ¡å™¨ä¸­tomcatä¸‹çš„webappsä¸‹</li><li>è§£å‹è‡ªå·±çš„é¡¹ç›®</li><li>.tar.gzçš„è§£å‹å‘½ä»¤ä¸º<code>tar -zxvf</code>åŠ æ–‡ä»¶å</li></ul><ul><li>.zipçš„è§£å‹å‘½ä»¤ä¸º<code>unzip</code>åŠ æ–‡ä»¶åï¼Œ<strong>æç¤º</strong>ä¸€èˆ¬linuxä¸­æ²¡æœ‰unzipçš„å‘½ä»¤ éœ€<code>apt-get install unzip</code></li></ul><h2 id="è¡¥å……è¯´æ˜"><a href="#è¡¥å……è¯´æ˜" class="headerlink" title="è¡¥å……è¯´æ˜"></a>è¡¥å……è¯´æ˜</h2><ul><li>ä¸€èˆ¬é¡¹ç›®æ”¾åœ¨/user/localä¸‹</li><li>éœ€è¦åœ¨é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šå¼€æ”¾ç«¯å£8080</li><li>éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ <code>vi /etc/profile</code></li><li>ä»ç½‘ä¸Šæ‹‰å–æ–‡ä»¶çš„å‘½ä»¤<code>wget åŠ åœ°å€</code></li><li><code>source /etc/profile</code>ä½¿é…ç½®ç«‹å³ç”Ÿæ•ˆ</li></ul><h3 id="å®‰è£…node"><a href="#å®‰è£…node" class="headerlink" title="å®‰è£…node"></a>å®‰è£…node</h3><ul><li>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬</li><li>åšè½¯è¿æ¥</li></ul>]]></content>
      
      
      <categories>
          
          <category> skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> serve </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
